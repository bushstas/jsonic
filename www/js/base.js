;(function() {
var __T = ['\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u043c\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442','\u00A0','Delete',' \u00A0 ','LOGO','\u0413\u043b\u0430\u0432\u043d\u0430\u044f','\u041f\u043e\u0438\u0441\u043a','\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435','\u041f\u043b\u0430\u043d\u044b \u0437\u0430\u043a\u0443\u043f\u043e\u043a','\u0410\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430'];
var __ = ['\u0420\u0435\u0433\u0438\u043e\u043d\u044b','\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438','\u0414\u0440\u0443\u0433\u0438\u0435 \u0441\u0442\u0440\u0430\u043d\u044b \u0438 \u0440\u0435\u0433\u0438\u043e\u043d\u044b','\u044c','\u0420\u0410\u0421\u0428\u0418\u0420\u0415\u041d\u041d\u042b\u0419 \u041f\u041e\u0418\u0421\u041a','\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439','\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043c\u0430\u0441\u0442\u0435\u0440\u043e\u043c','\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440','\u041c\u043e\u0438 \u0444\u0438\u043b\u044c\u0442\u0440\u044b','\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c','\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0432\u0435\u0441\u044c \u0444\u0438\u043b\u044c\u0442\u0440','\u0423\u0432\u0435\u0440\u0435\u043d\u044b?','\u0414\u0430','\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0441\u043b\u043e\u0432\u0430\u043c','\u0441 \u0443\u0447\u0435\u0442\u043e\u043c \u043c\u043e\u0440\u0444\u043e\u043b\u043e\u0433\u0438\u0438','\u043f\u043e \u0442\u043e\u0447\u043d\u043e\u043c\u0443 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u044e','\u0422\u0435\u043d\u0434\u0435\u0440\u044b \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u043c, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0430\u044e\u0442\u0441\u044f','dd month yyyy','\u0417\u0430\u043a\u0430\u0437 \u0437\u0432\u043e\u043d\u043a\u0430 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430','\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443 \u0432 \u0442\u0435\u0445\u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0443','\u0417\u0430\u044f\u0432\u043a\u0430 \u0432 \u0442\u0435\u0445\u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0443','\u0417\u0430\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0432\u043e\u043d\u043e\u043a \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430','standart-button','standart-button green-button','standart-button red-button','standart-button white-button','\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d','\u041b\u043e\u0433\u0438\u043d','\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c','\u041f\u0430\u0440\u043e\u043b\u044c','\u0412\u043e\u0439\u0442\u0438','\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u043e\u0435 \u0438\u043c\u044f','\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u044b\u0439 \u0442\u0435\u043b\u0435\u0444\u043e\u043d','Email','\u0422\u0435\u043c\u0430 \u0437\u0432\u043e\u043d\u043a\u0430','\u0423\u0434\u043e\u0431\u043d\u044b\u0439 \u0434\u0435\u043d\u044c \u0437\u0432\u043e\u043d\u043a\u0430','\u0423\u0434\u043e\u0431\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u0437\u0432\u043e\u043d\u043a\u0430','\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435','\u0441\u0435\u0433\u043e\u0434\u043d\u044f','\u0437\u0430\u0432\u0442\u0440\u0430','\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b','\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u0438\u0442\u044c \u0441\u043a\u0440\u0438\u043d\u0448\u043e\u0442','\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c','\u041f\u043d','\u0412\u0442','\u0421\u0440','\u0427\u0442','\u041f\u0442','\u0421\u0431','\u0412\u0441','\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u0430','\u0415\u0449\u0435','\u041b\u0418\u0427\u041d\u042b\u0419 \u041a\u0410\u0411\u0418\u041d\u0415\u0422','\u041a\u043b\u0438\u0435\u043d\u0442','\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f','Email','\u0422\u0430\u0440\u0438\u0444\u043d\u044b\u0439 \u043f\u043b\u0430\u043d','\u041d\u0430\u0447\u0430\u043b\u043e \u0434\u043e\u0441\u0442\u0443\u043f\u0430','\u041e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u0430','http:\/\/initpro.ru\/tariffs\/','\u0422\u0430\u0440\u0438\u0444\u043d\u044b\u0435 \u043f\u043b\u0430\u043d\u044b','\u0412\u0430\u0448 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440','http:\/\/initpro.ru\/order\/#1','\u0417\u0430\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u0430\u0440\u0438\u0444','\u041f\u0440\u043e\u0434\u043b\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f','8-800-700-12-50','\u0417\u0432\u043e\u043d\u043e\u043a \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u044b\u0439','\u0438\u043b\u0438','\u0417\u0430\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0432\u043e\u043d\u043e\u043a','\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c \u043c\u043e\u0438\u0445 \u0437\u0430\u043a\u0443\u043f\u043e\u043a','\u041e\u0431\u0449\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f','\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0438','\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438','\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u043c\u043e\u0438\u043c \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u043c','\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c','\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435','\u0417\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f','\u0417\u0430 \u0432\u0447\u0435\u0440\u0430','\u0422\u0435\u043a\u0443\u0449\u0438\u0445','\u0417\u0430 \u043d\u0435\u0434\u0435\u043b\u044e','\u0417\u0430 \u043c\u0435\u0441\u044f\u0446','\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u044f\u0442\u044c \u043c\u0435\u043d\u044f \u043e \u043f\u043e\u044f\u0432\u043b\u0435\u043d\u0438\u0438','\u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439 \u043f\u043e \u0442\u0435\u043d\u0434\u0435\u0440\u0430\u043c \u0432 \u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u043c','\u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u043e\u0432 \u043f\u043e \u0442\u0435\u043d\u0434\u0435\u0440\u0430\u043c \u0432 \u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u043c','\u043d\u043e\u0432\u044b\u0445 \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u043e\u0432 \u043f\u043e \u043c\u043e\u0438\u043c \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u043c','\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0438','\u043d\u043e\u0432\u044b\u0445 \u0442\u0435\u043d\u0434\u0435\u0440\u043e\u0432 \u043f\u043e \u043c\u043e\u0438\u043c \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u043c','\u043a\u0430\u0436\u0434\u044b\u0435 2 \u0447\u0430\u0441\u0430','\u043a\u0430\u0436\u0434\u044b\u0439 \u0434\u0435\u043d\u044c','\u0447\u0435\u0440\u0435\u0437 \u0434\u0435\u043d\u044c','\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u0430','\u041f\u0435\u0440\u0438\u043e\u0434\u0438\u0447\u043d\u043e\u0441\u0442\u044c \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0438','\u041f\u043e\u0434\u043f\u0438\u0441\u043a\u0430 \u043d\u0430 \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0443'];
var __V = [[{'value':'0','title':__[14]},{'value':'1','title':__[15]}],{'type':'text','name':'name','caption':__[31],'class':'half-width'},{'type':'text','name':'phone','caption':__[32],'class':'half-width'},{'type':'text','name':'email','caption':__[33],'class':'half-width'},{'key':'calendar','className':'float-right'},[{'title':__[87],'value':84},{'title':__[88],'value':7},{'title':__[89],'value':3}],{'scope':'app-mainpage-content','tabs':[{'title':__[70],'container':'app-mainpage-tab1-content','active':true},{'title':__[71],'container':'app-mainpage-tab2-content'},{'title':__[72],'container':'app-mainpage-tab3-content'}],'rest':{'showCount':true}},{'title':__[73],'extended':true,'className':'main-page-filter-stat'}];
var __DICTURL = 'dictionary/get.php';
var __TAGS = ['div','span','table','tbody','thead','tr','td','th','ul','ol','li','p','a','form','input','img','video','audio','aside','article','b','big','blockquote','button','canvas','caption','center','code','col','colgroup','footer','font','h1','h2','h3','h4','h5','h6','header','hr','i','iframe','label','menu','pre','s','section','select','strong','textarea','u','small'];
var __A = {'c':'class','i':'id','v':'value','t':'title','p':'placeholder','tp':'type','h':'href','s':'src','tr':'target','m':'method','st':'style','w':'width','ht':'height','sz':'size','mx':'maxlength','a':'action','n':'name','sc':'scope','r':'role','cp':'cellpadding','cs':'cellspacing'};
var __DW = {'filter':'\u0444\u0438\u043b\u044c\u0442\u0440,\u0444\u0438\u043b\u044c\u0442\u0440\u0430,\u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432','subscr':'\u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0430 \u043d\u0430 \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0443,\u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0438 \u043d\u0430 \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0443,\u043f\u043e\u0434\u043f\u0438\u0441\u043e\u043a \u043d\u0430 \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0443'};
var __EVENTTYPES = ['click','mouseover','mouseout','mouseenter','mouseleave','mousemove','contextmenu','dblclick','mousedown','mouseup','keydown','keyup','keypress','blur','change','focus','focusin','focusout','input','invalid','reset','search','select','submit','drag','dragend','dragenter','dragleave','dragover','dragstart','drop','copy','cut','paste','popstate','wheel','storage','show','toggle','touchend','touchmove','touchstart','touchcancel','message','error','open','transitionend','abort','play','pause','load','durationchange','progress','resize','scroll','unload','hashchange','beforeunload','pageshow','pagehide'];
var __ROUTES = [{'name':'main','view':Main,'accessLevel':10,'title':'Home','load':['Favorites','Filters'],'params':{'text':'blablabla','name':'$2'}},{'name':'search','view':Search,'accessLevel':0,'title':'\u041f\u043e\u0438\u0441\u043a','load':['Filters']},{'name':'favorite','view':Favorite,'accessLevel':0,'title':'\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435'},{'name':'analytics','view':Analytics,'accessLevel':0,'title':'\u0410\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430'}];
var __ERRORROUTES = {'404':Error404,'401':Error401};
var __HASHROUTER = true;
var __INDEXROUTE = 'main';
var __DEFAULTROUTE = null;
var __VIEWCONTAINER = 'app-view-container';
var __I = 'initiate';
var __GI = 'getInitials';
var __TC = TooltipPopup;
var __TA = 'tooltip/get.php';
var __APIDIR = 'api';
var __PAGETITLE = 'Page title';
var __USEROPTIONS = {'login':'user/login.php','logout':'user/logout.php','save':'user/save.php','fullAccess':11};
var CONFIG = {'user': {'get': 'user/get.php'},'filters': {'load': 'filters/get.php','save': 'filters/add.php','set': 'filters/set.php','subscribe': 'filters/subscribe.php'},'support': {'send': 'support/send.php'},'orderCall': {'send': 'orderCall/send.php'},'favorites': {'get': 'favorites/get.php','add': 'favorites/add.php','remove': 'favorites/remove.php'},'filterStat': {'load': 'filters/count.php'},'settings': {'subscr': 'settings/get.php','set': 'settings/set.php'}};
function Application() {}
Application.prototype.initiate = function() {
	this.views = {};
};
Application.prototype.run = function() {
	this.element = document.createElement('div');
	document.body.appendChild(this.element);
	this.render(this.element);
	this.createViewContainer();
	this.defineViews(__ROUTES);
	this.initRouter();
};
Application.prototype.initRouter = function() {
	Router.setNavigationHandler(this.handleNavigation.bind(this));
	Router.init();
};
Application.prototype.defineViews = function(routes) {
	for (var i = 0; i < routes.length; i++) {
		this.views[routes[i]['name']] = null;
		if (isArray(routes[i]['children'])) {
			this.defineViews(routes[i]['children']);
		}
	}
	var errorRoutes = __ERRORROUTES;
	if (isObject(errorRoutes)) {
		for (var k in errorRoutes) {
			this.views[k] = null;
		}
	}
};
Application.prototype.handleNavigation = function(route, changeTitle) {
	this.isChangeTitle = changeTitle;
	this.currentRoute = route;
	var view = this.views[route['name']];
	var isSameView = this.currentView == view;
	if (!isSameView && this.currentView) {
		this.activateView(this.currentView, false);
	}
	this.currentView = view;
	if (!isUndefined(view) && isFunction(route['view'])) {
		if (!view) {
			var viewParams = this.getViewParams(route, true);
			view = this.currentView = this.views[route['name']] = new route['view'](viewParams);
			view.setOnReadyHandler(this.onViewReady.bind(this));
			var viewContentElement = this.createViewContentElement();
			view.render(viewContentElement);
			view.initControllers();
			Globals.addView(view, route['name']);
		} else {
			this.activateView(view, true, isSameView);
		}
		if (isNumber(route['error'])) {
			this.onError(route['error']);
		} else {
			this.onNoErrors();
		}
	} else {
		this.log('no view to represent given route', 'handleNavigation', route);
	}
};
Application.prototype.getViewParams = function(route, allParams) {
	var params;
	if (isObject(route['dinamicParams'])) {
		params = {};
		for (var k in route['dinamicParams']) {
			params[k] = Router.getPathPartAt(route['dinamicParams'][k]);
		}
	}
	if (allParams) {
		if (isObject(params)) {
			Objects.merge(params, route['params']);
		} else {
			params = route['params'];
		}
	}
	return params;
};
Application.prototype.onViewReady = function() {
	if (this.isChangeTitle) {
		var title = this.currentRoute['title'];
		if (isString(title)) {
			var titleParams = this.currentView.getTitleParams();
			if (isObject(titleParams)) {
				var regExp;
				for (var k in titleParams) {
					regExp = new RegExp("\\$" + k)
					title = title.replace(regExp, titleParams[k]);
				}
			}
		}
		this.setPageTitle(title ||__PAGETITLE || '');
	}
};
Application.prototype.createViewContentElement = function() {
	var element = document.createElement('div');
	this.viewContainer.appendChild(element);
	return element;
};
Application.prototype.createViewContainer = function() {
	var viewContainer;
	var containerClass = __VIEWCONTAINER;
	if (containerClass) {
		viewContainer = document.body.querySelector('.' + containerClass);
	}
	if (!viewContainer) {
	 	viewContainer = document.createElement('div');
		if (containerClass) {
			viewContainer.className = containerClass;
		}
		this.element.appendChild(viewContainer);
	}
	this.viewContainer = viewContainer;
};
Application.prototype.activateView = function(view, isActivated, isSameView) {
	var parentElement = view.getParentElement();
	if (!isActivated) {
		this.viewContainer.removeChild(parentElement);
	} else {
		var params = this.getViewParams(this.currentRoute);
		if (isObject(params)) {
			view.set(params);
		}
		if (!isSameView) {
			this.viewContainer.appendChild(parentElement);
		}
	}
	view.activate(isActivated);
};
Application.prototype.setPageTitle = function(title) {
	var titleElement = document.getElementsByTagName('title')[0];
	if (!isElement(titleElement)) {
		var headElement = document.getElementsByTagName('head')[0];
		if (!isElement(headElement)) {
			var htmlElement = document.getElementsByTagName('html')[0];
			headElement = htmlElement.appendChild(document.createElement('head'));
		}
		titleElement = headElement.appendChild(document.createElement('title'));
	}
	titleElement.innerHTML = title;
};
Application.prototype.disposeView = function(viewName) {
	if (isObject(this.views[viewName])) {
		this.views[viewName].dispose();
		this.views[viewName] = null;
	}
};
Application.prototype.onNoErrors = function() {};
Application.prototype.onError = function(errorCode) {};
function Component() {
	var $;
	var processInitials = function() {
		$.initials = $.initials || {};
		if (isObject($.props['args'])) {
			$.receivedArgs = $.props['args'];
			delete $.props['args'];
		}
		if (isObject($.props['props'])) {
			Objects.merge($.props, $.props['props']);
			delete $.props['props'];
		}
		var initials = $.initials;
		if (isObject(initials)) {
			for (var k in initials) {
				if (isArrayLike(initials[k])) {
					if (k == 'correctors') {
						for (var j in initials[k]) addCorrector(j, initials[k][j]);
					} else if (k == 'globals') {
						for (var j in initials[k]) Globals.subscribe(j, initials[k][j], $);
					} else if (k == 'followers') {
						for (var j in initials[k]) addFollower(j, initials[k][j]);
					} else if (k == 'controllers') {
						for (var i = 0; i < initials[k].length; i++) attachController(initials[k][i]);
					} else if (k == 'props') {
						Objects.merge($.props, initials[k]);
					} else if (k == 'options') {
						$.initOptions(initials[k]);
					}
				}
			}
		}
	};
	var attachController = function(options) {
		if (isObject(options['on'])) {
			for (var k in options['on']) options.controller.subscribe(k, options['on'][k], $);
		}
	};
	var addCorrector = function(name, handler) {
		if (isFunction(handler)) {
			$.correctors = $.correctors || {};
			$.correctors[name] = handler;
		}
	};
	var addFollower = function(name, handler) {
		if (isFunction(handler)) {
			$.followers = $.followers || {};
			$.followers[name] = handler;
		}
	};
	var subscribeToHelper = function(options) {
		if (isObject(options['options'])) options['helper'].subscribe($, options['options']);
	};
	var getInitial = function(initialName) {
		return Objects.get($.initials, initialName);
	};
	var processPostRenderInitials = function() {
		var helpers = getInitial('helpers');
		if (isArray(helpers)) {
			for (var i = 0; i < helpers.length; i++) subscribeToHelper(helpers[i]);
		}
	};
	var load = function() {
		var loader = getInitial('loader');
		if (isObject(loader) && isObject(loader['controller'])) {
			$.loader = loader['controller'];
			var isAsync = !!loader['async'];
			$.loader.subscribe('load', onDataLoad.bind($, isAsync), $);
			var options = loader['options'];
			if (isFunction(options)) options = options();
			$.loader.doAction('load', options);
			if (!isAsync) {
				renderTempPlaceholder();
				return;
			}
		}
		onReadyToRender();
	};
	var renderTempPlaceholder = function() {
		$.tempPlaceholder = document.createElement('span');
		$.parentElement.appendChild($.tempPlaceholder);
	};
	var onDataLoad = function(isAsync, data) {
		$.onLoaded(data);
		if (!isAsync) onReadyToRender();
	};
	var onReadyToRender = function() {
		if (!$.isRendered()) {
			doRendering();
			if ($.tempPlaceholder) {
				$.parentElement.removeChild($.tempPlaceholder);
				$.tempPlaceholder = null;
			}
			processPostRenderInitials();
		}
	};
	var doRendering = function() {
		$.level = new Level();
		$.args = getCombinedArgs();
		var content = $.getTemplateMain($, $.args);
		if (isArray(content)) {
			$.level.setComponent($);
			$.level.render(content, $.parentElement, $, $.tempPlaceholder);
		}
		$.rendered = true;
		$.onRendered();
		if (isArray($.callbacks)) {
			for (var i = 0; i < $.callbacks.length; i++) {
				if (isFunction($.callbacks[i])) $.callbacks[i]();
			}
		}
		$.callbacks = null;
		$.waiting = null;
	};
	var getCombinedArgs = function() {
		return Objects.merge({}, $.initials['args'], $.getArgs(), $.receivedArgs); 
	};
	var propagatePropertyChange = function(changedProps) {$=this;
		var pn, pv, i, activities, cnds = [], ifsw = [];
		for (pn in changedProps) {
			pv = changedProps[pn];
			activities = $.propActivities['cnd'];
			if (activities && isArray(activities[pn])) {
				for (i = 0; i < activities[pn].length; i++) {
					if (cnds.indexOf(activities[pn][i]) == -1) {
						activities[pn][i].update();
						cnds.push(activities[pn][i]);
					}
				}
			}
			activities = $.propActivities['isw'];
			if (activities && isArray(activities[pn])) {
				for (i = 0; i < activities[pn].length; i++) {
					if (ifsw.indexOf(activities[pn][i]) == -1) {
						activities[pn][i].update();
						ifsw.push(activities[pn][i]);
					}
				}
			}
			activities = $.propActivities['swt'];
			if (activities && isArray(activities[pn])) {
				for (i = 0; i < activities[pn].length; i++) activities[pn][i].update(pv);
			}
			activities = $.propActivities['for'];
			if (activities && isArray(activities[pn])) {
				for (i = 0; i < activities[pn].length; i++) activities[pn][i].update(pv);
			}
			activities = $.propActivities['nod'];
			if (activities && isArray(activities[pn])) {
				var node;
				for (i = 0; i < activities[pn].length; i++) activities[pn][i].textContent = pv;
			}
			activities = $.propActivities['atr'];
			if (activities && isArray(activities[pn])) {
				var key, propAttr, attrParts;
				for (i = 0; i < activities[pn].length; i++) {
					key = activities[pn][i];
					attrParts = activities[pn][i][2]();
					var attrValue = '';
					var attrVal;
					for (var j = 0; j < attrParts.length; j++) {
						attrVal = isFunction(attrParts[j]) ? attrParts[j]() : attrParts[j];
						if (!isUndefined(attrVal)) attrValue += attrVal;
					}
					attrValue = attrValue.trim();
					var attrName = __A[activities[pn][i][1]] || activities[pn][i][1];
					activities[pn][i][0].attr(attrName, attrValue);
				}
			}
			activities = $.propActivities['cmp'];
			if (activities && isArray(activities[pn])) {
				var component, value;
				for (i = 0; i < activities[pn].length; i++) {
					component = activities[pn][i][0];
					value = activities[pn][i][1]();
					if (component) {
						if (activities[pn][i][2] && isObject(value)) component.refresh(value);
						else component.set(pn, value);
					}
				}
			}
		}
		cnds = null;
		ifsw = null;
	};
	Component.prototype.initiate = function() {$=this;
		$.propActivities = {};
		$.propsToSet = {};
		$.rendered = false;
		$.disposed = false;
	};
	Component.prototype.render = function(parentElement) {$=this;
		$.parentElement = parentElement;
		processInitials();
		load();
	};
	Component.prototype.instanceOf = function(parent) {$=this;
		return $.inheritedSuperClasses && $.inheritedSuperClasses.indexOf(parent) > -1;
	};
	Component.prototype.dispatchEvent = function(eventType, eventParams) {$=this;
		if (isArray($.listeners)) {
			for (var i = 0; i < $.listeners.length; i++) {
				if (isNumber($.listeners[i]['type'])) $.listeners[i]['type'] = __EVENTTYPES[$.listeners[i]['type']];
				if ($.listeners[i]['type'] == eventType) $.listeners[i]['handler'].call($.listeners[i]['subscriber'] || null, eventParams);
			}
		}
	};
	Component.prototype.provideWithComponent = function(propName, componentName, waitingChild) {$=this;
		var cmp = $.getChildById(componentName);
		if (cmp) waitingChild.set(propName, cmp);
		else {
			$.waiting = $.waiting || {};
			$.waiting[componentName] = $.waiting[componentName] || [];
			$.waiting[componentName].push([waitingChild, propName]);
		}
	};
	Component.prototype.getWaitingChild = function(componentName) {$=this;
		return Objects.get($.waiting, componentName);
	};
	Component.prototype.get = function(propName) {$=this;
		return $.propsToSet[propName] || $.props[propName];
	};
	Component.prototype.showElement = function(element, isShown) {$=this;
		if (isString(element)) element = $.findElement(element);
		if (isElement(element)) element.show(isShown);
	};
	Component.prototype.setStyle = function(styles) {$=this;
		if ($.isRendered()) $.getElement().setStyle(styles);
	};
	Component.prototype.addClass = function(className, isAdding) {$=this;
		if ($.isRendered()) {
			if (isAdding || isUndefined(isAdding)) $.getElement().addClass(className);
			else $.getElement().removeClass(className);
		}
	};
	Component.prototype.each = function(propName, callback) {$=this;
		var ar = $.get(propName);
		if (isArrayLike(ar) && isFunction(callback)) {
			if (isArray(ar)) for (var i = 0; i < ar.length; i++) callback.call($, ar[i], i, ar);
			else for (var k in ar) callback.call($, ar[k], k, ar);
		}
	};
	Component.prototype.toggle = function(propName) {$=this;
		$.set(propName, !$.get(propName));
	};
	Component.prototype.set = function(propName, propValue) {$=this;
		var props;
		if (!isUndefined(propValue)) {
			props = {};
			props[propName] = propValue;
		} else props = propName;
		var isChanged = false;
		var changedProps = {};
		var currentValue;
		for (var k in props) {
			if (Objects.has($.correctors, k)) props[k] = $.correctors[k].call($, props[k], props);
			currentValue = $.props[k];
			if (currentValue == props[k]) continue;
			if (isArray(currentValue) && isArray(props[k]) && Objects.equals(currentValue, props[k])) continue;
			isChanged = true;
			$.props[k] = props[k];
			changedProps[k] = props[k];
		}	
		if ($.isRendered()) {
			if (isChanged) propagatePropertyChange(changedProps);
			for (var k in changedProps) {
				if (Objects.has($.followers, k)) $.followers[k].call($);
			}
		}
		changedProps = null;
	};
	Component.prototype.getFirstNodeChild = function() {$=this;
		if ($.level) return $.level.getFirstNodeChild();
		return null;
	};
	Component.prototype.preset = function(propName, propValue) {$=this;
		$.propsToSet[propName] = propValue;
	};
	Component.prototype.update = function() {$=this;
		$.set($.propsToSet);
		$.propsToSet = {};
	};
	Component.prototype.refresh = function(args) {$=this;
		if (args) $.receivedArgs = args;
		$.unrender();
		doRendering();
	};
	Component.prototype.delay = function(f, n) {$=this;
		window.clearTimeout($.timeout);
		if (isFunction(f)) $.timeout = window.setTimeout(f.bind($), n || 200);
	};
	Component.prototype.addChild = function(child, parentElement) {$=this;
		$.level.renderComponent(child, parentElement);
	};
	Component.prototype.removeChild = function(child) {$=this;
		if (!child) return;
		var childId = child;
		if (isString(child)) child = $.getChild(child);
		else childId = Objects.getKey($.children, child);
		if (isComponentLike(child)) child.dispose();
		if ((isString(childId) || isNumber(childId)) && isObject($.children)) delete $.children[childId];	
	 };
	Component.prototype.forEachChild = function(callback) {$=this;
		if (isObject($.children)) Objects.each($.children, callback, $);
	};
	Component.prototype.registerChildComponent = function(child) {$=this;
		$.childrenCount = $.childrenCount || 0;
		$.children = $.children || {};
		$.children[child.getId() || $.childrenCount] = child;
		$.childrenCount++;
	};
	Component.prototype.setParent = function(parentalComponent) {$=this;
		$.parentalComponent = parentalComponent;
	};
	Component.prototype.getParent = function() {$=this;
		return $.parentalComponent;
	};
	Component.prototype.getChildAt = function(index) {$=this;
		return Objects.getByIndex($.children, index);
	};
	Component.prototype.getChildren = function(classFunc) {$=this;
		var children = [];
		$.forEachChild(function(child) {
			if (isComponentLike(child) && child.instanceOf(classFunc)) children.push(child);
		});
		return children;
	};
	Component.prototype.getChild = function(id) {$=this;
		return Objects.get($.children, id);
	};
	Component.prototype.doOnParentReady = function(callback, params) {$=this;
		$.getParent().addCallback(callback.bind($, params));
	};
	Component.prototype.addCallback = function(callback) {$=this;
		$.callbacks = $.callbacks || [];
		$.callbacks.push(callback);
	};
	Component.prototype.setId = function(id) {$=this;
		$.componentId = id;
	};
	Component.prototype.getId = function() {$=this;
		return $.componentId;
	};
	Component.prototype.getElement = function() {$=this;
		return $.scope || $.parentElement;
	};
	Component.prototype.findElement = function(selector, scopeElement) {$=this;
		return (scopeElement || $.getElement()).querySelector(selector);
	};
	Component.prototype.findElements = function(selector, scopeElement) {$=this;
		return Array.prototype.slice.call((scopeElement || $.scope || $.parentElement).querySelectorAll(selector));
	};
	Component.prototype.findElementWithinParent = function(selector) {$=this;
		return $.getParent().findElement(selector);
	};
	Component.prototype.findElementsWithinParent = function(selector) {$=this;
		return $.getParent().findElements(selector);
	};
	Component.prototype.fill = function(element, data) {$=this;
		if (isString(element)) element = $.findElement(element);
		if (isElement(element)) {
			var callback = function(el) {
				for (var i = 0; i < el.childNodes.length; i++) {
					if (isElement(el.childNodes[i])) {
						callback(el.childNodes[i]);
					} else if (isText(el.childNodes[i]) && el.childNodes[i].hasOwnProperty('placeholderName') && !isUndefined(data[el.childNodes[i]['placeholderName']])) {
						el.childNodes[i].textContent = data[el.childNodes[i]['placeholderName']];
					}
				}
			};
			callback(element);
		}
	};
	Component.prototype.removeNode = function(node) {$=this;
		if (isString(node)) node = $.findElement(node);
		if (isNode(node) && node.parentNode == $.parentElement) $.parentElement.removeChild(node);
	};
	Component.prototype.getParentElement = function() {$=this;
		return $.parentElement;
	};
	Component.prototype.isRendered = function() {$=this;
		return $.rendered;
	};
	Component.prototype.isDisposed = function() {$=this;
		return $.disposed;
	};
	Component.prototype.addListener = function(target, eventType, handler) {$=this;
		if (isElement(target)) {
			$.eventHandler = $.eventHandler || new EventHandler();
			$.eventHandler.listen(target, eventType, handler.bind($));
		} else target.subscribe(eventType, handler, $);
	};
	Component.prototype.subscribe = function(eventType, handler, subscriber) {$=this;
		$.listeners = $.listeners || [];
		$.listeners.push({'type': eventType, 'handler': handler, 'subscriber': subscriber});
	};
	Component.prototype.setAppended = function(isAppended) {$=this;
		if ($.level) $.level.setAppended(isAppended);
	};
	Component.prototype.setScope = function(scope) {$=this;
		$.scope = scope;
	};
	Component.prototype.log = function(message, method, opts) {$=this;
		log(message, method, $, opts);
	};
	Component.prototype.registerPropActivity = function(type, name, data) {$=this;
		$.propActivities = $.propActivities || {};
		$.propActivities[type] = $.propActivities[type] || {};
		$.propActivities[type][name] = $.propActivities[type][name] || [];
		$.propActivities[type][name].push(data);
		return $.propActivities[type][name].length - 1;
	};
	Component.prototype.disposePropActivities = function(type, data) {$=this;
		var activities = $.propActivities[type];
		if (isObject(data)) {
			var deleted;
			for (var pn in data) {
				if (isArray(activities[pn])) {
					deleted = 0;
					for (var i = 0; i < data[pn].length; i++) {
						activities[pn].splice(data[pn][i] - deleted, 1);
						deleted++;
					}
				}
			}
		}
	};
	Component.prototype.unrender = function() {$=this;
		$.disposeLinks();
		$.disposeInternal();
		$.level.dispose();
		if ($.eventHandler) {
			$.eventHandler.dispose();
			$.eventHandler = null;
		}
		$.level = null;
		$.listeners = null;
	};
	Component.prototype.dispose = function() {$=this;
		$.unrender();
		$.propActivities = null;
		$.parentElement = null;
		$.props = null;
		$.propsToSet = null;	
		$.provider = null;
		$.children = null;
		$.disposed = true;
		$.loader = null;
		$.initials = null;
		$.followers = null;
		$.correctors = null;
		$.receivedArgs = null;
		$.args = null;
		$.parentalComponent = null;
	};
	(function(){
		var f = function(){return null};
		Component.prototype.initOptions = f;
		Component.prototype.onRendered = f;
		Component.prototype.onLoaded = f;
		Component.prototype.getTemplateMain = f;
		Component.prototype.getTemplateByKey = f;
		Component.prototype.disposeInternal = f;
		Component.prototype.getArgs = f;
	})();
	Component.prototype.g = Component.prototype.get;
}
Component();
function Condition(params) {
	this.params = params;
	this.isTrue = !!this.params['i']();
}
Condition.prototype.render = function(parentElement, parentLevel) {
	this.parentElement = parentElement;
	this.parentLevel = parentLevel;
	this.createLevel(false);
};
Condition.prototype.createLevel = function(isUpdating) {
	this.level = new Level();
	this.level.setComponent(this.parentLevel.getComponent());
	var nextSiblingChild = isUpdating ? this.getNextSiblingChild() : null;
	this.level.render(this.getChildren(), this.parentElement, this.parentLevel, nextSiblingChild);
};
Condition.prototype.update = function() {
	var isTrue = !!this.params['i']();
	if (isTrue != this.isTrue) {
		this.isTrue = isTrue;
		this.disposeLevel();
		this.createLevel(true);
	}
};
Condition.prototype.getChildren = function() {
	return this.isTrue ? this.params['c']() : (isFunction(this.params['e']) ? this.params['e']() : null);
};
Condition.prototype.getFirstNodeChild = function() {
	if (this.level) {
		return this.level.getFirstNodeChild();
	}
	return null;
};
Condition.prototype.disposeLevel = function() {
	if (this.level) {
		this.level.dispose();
		this.level = null;
	}
};
Condition.prototype.dispose = function() {
	this.disposeLinks();
	this.disposeLevel();
	this.parentElement = null;
	this.parentLevel = null;
	this.params = null;
	this.nextSiblingChild = null;
};
function Control() {}
Control.prototype.getInitials = function() {
	return {'enabled': true};
};
Control.prototype.attachControl = function(control) {
	if (isString(control)) control = this.getChildById(control);
	if (isControl(control)) {
		this.controls = this.controls || {};
		this.controls[control.getId()] = control;
		this.addListener(control, 'change', this.onChangeChildControl);
	}
};
Control.prototype.getName = function() {
	return this.props.name;
};
Control.prototype.getValue = function() {
	var value;
	if (this.hasControls()) {
		value = {};
		for (var k in this.controls) value[k] = this.controls[k].getValue();
	} else value = this.getCorrectedValue(this.getControlValue());
	return value;
}
Control.prototype.getControlValue = function() {
	return (!isUndefined(this.value) ? this.value : this.props.value) || '';
}
Control.prototype.getCorrectedValue = function(value) {
	var type = Objects.get(this.options, 'type');
	switch (type) {
		case 'array':
			if (isString(value)) {
				value = value.split(',');
			} else if (!isArray(value)) {
				value = [value];
			}
		break;
		case 'string':
			if (isArray(value)) {
				value = value.join(',');
			} else if (isObject(value)) {
				value = JSON.stringify(value);
			} else if (isNumber(value)) {
				value = value + '';
			} else if (!!value) {
				value = '1';
			} else {
				value = '';
			}
		break;
		case 'number':
			if (isString(value)) {
				value = stringToNumber(value);
			} else if (isBool(value)) {
				value = !!value ? 1 : 0;
			} else if (isArray(value)) {
				value = ~~value[0];
			} else {
				value = 0;
			}
		break;
		case 'boolean':
			value = !!value && value === '0';
		break;
	}
	return this.getProperValue(value);
};
Control.prototype.getProperValue = function(value) {
	return value;
};
Control.prototype.setValue = function(value) {
	if (this.hasControls() && isObject(value)) {
		for (var k in value) {
			if (isControl(this.controls[k])) this.controls[k].setValue(this.controls[k].hasControls() ? value : value[k]);
		}
	} else {
		this.value = value;
		this.setProperValue(value);
	}
};
Control.prototype.setProperValue = function(value) {
	this.set('value', value);
};
Control.prototype.hasControls = function() {
	return !Objects.empty(this.controls);
}
Control.prototype.isEnabled = function() {
	return !!this.get('enabled');
};
Control.prototype.setEnabled = function(isEnabled) {
	this.set('enabled', isEnabled);
};
Control.prototype.dispatchChange = function() {
	this.dispatchEvent('change', {'value': this.get('value'), 'instance': this});
};
Control.prototype.onChangeChildControl = function(e) {
	this.dispatchChange();
};
Control.prototype.disposeInternal = function() {
	this.controls = null;
	this.options = null;
	this.value = null;
};
function Controller() {}
Controller.prototype.initiate = function() {
	this.listeners = [];
};
Controller.prototype.processInitials = function() {
	var initials = this.initials;
	if (isObject(initials)) {
		for (var k in initials) {
			if (initials[k] && isObject(initials[k])) {
				if (k == 'globals') {
				} else if (k == 'options') {
					this.options = initials[k];
				} else if (k == 'controllers') {
					for (var i = 0; i < initials[k].length; i++) {
						this.attachController(initials[k][i]);
					}
				}
			}
		}
	}
};
Controller.prototype.attachController = function(options) {
	if (isObject(options['controller'])) {
		if (isObject(options['on'])) {
			for (var k in options['on']) {
				options.controller.subscribe(k, options['on'][k], this);
			}
		}
	}
};
Controller.prototype.subscribe = function(eventType, callback, subscriber) {
	this.listeners.push([eventType, callback, subscriber]);
};
Controller.prototype.unsubscribe = function(subscriber, eventType) {
	var done = false;
	while (!done) {
		done = true;
		for (var i = 0; i < this.listeners.length; i++) {
			if (this.listeners[i][2] == subscriber && (!eventType || this.listeners[i][0] == eventType)) {
				this.listeners.splice(i, 1);
				done = false;
				break;
			}
		}
	}
};
Controller.prototype.dispatchEvent = function(eventType, data) {
	var dataToDispatch = data;
	if (Objects.has(this.options, 'clone', true)) {
		dataToDispatch = Objects.clone(data);
	}
	if (isArray(this.listeners)) {
		for (var i = 0; i < this.listeners.length; i++) {
			if (this.listeners[i][0] == eventType && isFunction(this.listeners[i][1])) {
				this.listeners[i][1].call(this.listeners[i][2] || null, dataToDispatch, this);
			}
		}
	}
};
Controller.prototype.getData = function(actionName) {
	return !!action && !!this.data && isObject(this.data) ? this.data[action] : this.data;
};
Controller.prototype.getItemById = function(id) {
	var primaryKey = this.getPrimaryKey();
	var data = this.data['load'];
	if (isArray(data)) {
		for (var i = 0; i < data.length; i++) {
			if (Objects.has(data[i], primaryKey, id)) return data[i];
		}
	}
	return null;
};
Controller.prototype.getItem = function(nameOrIndex, actionName) {
	actionName = actionName || 'load';
	return isArrayLike(this.data[actionName]) ? this.data[actionName][nameOrIndex] : null;
};
Controller.prototype.load = function(options) {
	this.doAction('load', options);
};
Controller.prototype.doAction = function(actionName, options, url) {
	var action = this.getAction(actionName);
	this.action = action;	
	if (actionName == 'load' && this.gotFromStore(options)) {
		return;
	}
	if (!isObject(options)) {
		options = {};
	}
	if (action && isObject(action) && action['options'] && isObject(action['options'])) {
		Objects.merge(options, action['options']);
	}
	var method = action['method'] || 'POST';
	url = url || this.makeUrl(action['url'], options);
	if (!url || !isString(url)) {
		log('url to execute the action ' + actionName + ' is invalid or empty', 'doAction', this, {action: action});
	}
	this.request = this.request || new AjaxRequest(url, this.onActionComplete.bind(this));
	this.request.send(method, options, url);
};
Controller.prototype.gotFromStore = function(options) {
	if (this.shouldStore()) {
		var storeAs = this.getStoreAs(options);
		if (isString(storeAs)) {
			var storedData = StoreKeeper.getActual(storeAs, Objects.get(this.options, 'storePeriod'));
			if (isArrayLike(storedData)) {
				this.onActionComplete(storedData, true);
				return true;
			}
		}
	}
	return false;
};
Controller.prototype.makeUrl = function(url, options) {
	var regExp;
	for (var k in options) {
		if (isString(options[k]) || isNumber(options[k])) {
			regExp = new RegExp('\\$' + k)
			url = url.replace(regExp, options[k]);
		}
	}
	return url;
};
Controller.prototype.onActionComplete = function(data, isFromStorage) {
	var actionName = this.action['name'];
	this.data = this.data || {};
	this.data[actionName] = data;
	if (isFunction(this.action['callback'])) {
		this.action['callback'].call(this, data);
	}
	this.dispatchEvent(actionName, data);
	if (!isFromStorage && actionName == 'load' && this.shouldStore()) {
		this.store(true, data);
	}
};
Controller.prototype.shouldStore = function() {
	var shouldStore = Objects.get(this.options, 'store');
	if (shouldStore === false) return false;
	return Objects.has(this.options, 'storeAs');
};
Controller.prototype.store = function(isAdding, data) {console.log('store')
	var storeAs = this.getStoreAs(data);
	if (isAdding) {		
		StoreKeeper.set(storeAs, data);
	} else {
		StoreKeeper.remove(storeAs);
	}
};
Controller.prototype.getStoreAs = function(data) {
	var storeAs = Objects.get(this.options, 'storeAs');
	if (isArrayLike(data) && isString(storeAs) && (/\$[a-z_]/i).test(storeAs)) {
		var parts = storeAs.split('$');
		storeAs = parts[0];
		for (var i = 1; i < parts.length; i++) {
			if (data[parts[i]]) storeAs += data[parts[i]];
			else storeAs += parts[i];				
		}
	}
	return storeAs;
};
Controller.prototype.getPrimaryKey = function() {
	return Objects.get(this.options, 'key', 'id');
};
Controller.prototype.getAction = function(actionName) {	
	var actions = Objects.get(this.initials, 'actions');
	if (isObject(actions)) {
		var action = actions[actionName];
		if (isObject(action)) {
			if (!isString(action['name'])) {
				if (isObject(action['routeOptions']) && actionName == 'load') {
					this.initActionRouteOptions(action);
				}
				action['name'] = actionName;
			}
			return action;
		}
		log('action is invalid', 'getAction', this, {action: action});
	} else {
		log('no actions', 'getAction', this, {actions: actions});
	}
	return null;
};
Controller.prototype.initActionRouteOptions = function(action) {
	var value;
	this.currentRouteOptions = {};
	var routeOptions = {};
	for (var k in action['routeOptions']) {
		value = Router.getPathPartAt(action['routeOptions'][k]);
		if (isString(value)) {
			routeOptions[k] = value;
		}
	}
	this.setCurrentRouteOptions(routeOptions, action);
	Router.subscribe(action['routeOptions'], this);
};
Controller.prototype.setCurrentRouteOptions = function(routeOptions, action) {
	this.currentRouteOptions = routeOptions;
	if (!isObject(action['options'])) {
		action['options'] = {};
	}
	for (var k in routeOptions) {
		action['options'][k] = routeOptions[k];
	}
};
Controller.prototype.handleRouteOptionsChange = function(routeOptions) {
	if (!Objects.equals(routeOptions, this.currentRouteOptions)) {
		var action = this.getAction('load');
		this.setCurrentRouteOptions(routeOptions, action);
		this.doAction('load');
	}
};
Controller.prototype.dispose = function() {
	this.listeners = null;
	if (this.request) {
		this.request.dispose();
	}
	this.options = null;
	this.request = null;
	this.data = null;
	this.action = null;
	this.initials = null;
};
function Core() {}
Core.prototype.getNextSiblingChild = function() {
	if (!this.nextSiblingChild) {
		return null;
	}
	if (this.nextSiblingChild instanceof Node) {
		return this.nextSiblingChild;
	}
	var firstNodeChild = this.nextSiblingChild.getFirstNodeChild();
	if (firstNodeChild) {
		return firstNodeChild;
	}
	return this.nextSiblingChild.getNextSiblingChild();	
};
Core.prototype.setNextSiblingChild = function(nextSiblingChild) {
	this.nextSiblingChild = nextSiblingChild;
	if (!(nextSiblingChild instanceof Node)) {
		this.nextSiblingChild.setPrevSiblingChild(this);
	}
};
Core.prototype.setPrevSiblingChild = function(prevSiblingChild) {
	this.prevSiblingChild = prevSiblingChild;
};
Core.prototype.disposeLinks = function() {
	if (this.prevSiblingChild) {
		this.prevSiblingChild.setNextSiblingChild(this.nextSiblingChild);
	}
	this.prevSiblingChild = null;
	this.nextSiblingChild = null;
};
Core.prototype.setScope = function(scope) {
	this.parentLevel.setScope(scope);
};
Core.prototype.getPropName = function(i) {
	this.parentLevel.getPropName(i);
};
function Foreach(params) {
	this.items = params['p'];
	this.handler = params['h'];
	this.levels = [];
}
Foreach.prototype.render = function(parentElement, parentLevel) {
	this.parentElement = parentElement;
	this.parentLevel = parentLevel;
	this.createLevels(false);
};
Foreach.prototype.createLevels = function(isUpdating) {
	if (isArray(this.items)) {
		for (var i = 0; i < this.items.length; i++) {
			this.createLevel(this.handler(this.items[i], i), isUpdating);
		}
	} else if (isObject(this.items)) {
		for (var k in this.items) {
			this.createLevel(this.handler(this.items[k], k), isUpdating);
		}
	}
};
Foreach.prototype.createLevel = function(items, isUpdating) {
	var level = new Level();
	level.setComponent(this.parentLevel.getComponent());
	var nextSiblingChild = isUpdating ? this.getNextSiblingChild() : null;
	level.render(items, this.parentElement, this.parentLevel, nextSiblingChild);
	this.levels.push(level);
};
Foreach.prototype.update = function(items) {
	this.items = items;
	this.disposeLevels();
	this.createLevels(true);
};
Foreach.prototype.getFirstNodeChild = function() {
	if (this.levels[0]) {
		return this.levels[0].getFirstNodeChild();
	}
	return null;
};
Foreach.prototype.disposeLevels = function() {
	for (var i = 0; i < this.levels.length; i++) {
		this.levels[i].dispose();
	}
	this.levels = [];
};
Foreach.prototype.dispose = function() {
	this.disposeLinks();
	this.disposeLevels();
	this.levels = null;
	this.parentElement = null;
	this.parentLevel = null;
	this.items = null
	this.handler = null;
	this.nextSiblingChild = null;
	this.prevSiblingChild = null;
};
function IfSwitch(params) {
	this.values = params['is'];
	this.default = params['d'];
	this.handler = params['c'];
	this.current = null;
	this.levels = [];
}
IfSwitch.prototype.createLevels = function(isUpdating) {
	var children = this.handler();
	var values = this.values();
	for (var i = 0; i < values.length; i++) {
		if (!!values[i]) {
			if (i === this.current) return;
			for (var j = 0; j < children[i].length; j++) this.createLevel(children[i][j], isUpdating);
			this.current = i;
			return;
		}
	}
	if (isArray(this.default)) {
		for (i = 0; i < this.default.length; i++) this.createLevel(this.default[i], isUpdating);
	}
};
IfSwitch.prototype.update = function(value) {
	this.value = value;
	this.disposeLevels();
	this.createLevels(true);
};
IfSwitch.prototype.dispose = function() {
	this.disposeLinks();
	this.disposeLevels();
	this.levels = null;
	this.parentElement = null;
	this.parentLevel = null;
	this.current = null;
	this.values = null;
	this.default = null;
	this.handler = null;
	this.nextSiblingChild = null;
	this.prevSiblingChild = null;
};
function Level() {
	this.children = [];
	this.detached = false;
}
Level.prototype.render = function(items, parentElement, parentLevel, nextSiblingChild) {
	this.parentElement = parentElement;
	this.parentLevel = parentLevel;
	this.nextSiblingChild = nextSiblingChild;
	this.renderItems(items);
	this.prevChild = null;
	this.nextSiblingChild = null;
};
Level.prototype.setComponent = function(component) {
	this.component = component;
};
Level.prototype.getComponent = function() {
	return this.component;
};
Level.prototype.renderItems = function(items) {
	if (isArray(items)) {
		for (var i = 0; i < items.length; i++) this.renderItem(items[i]);
	} else this.renderItem(items);
};
Level.prototype.renderItem = function(item) {
	if (!item && item !== 0) return;
	if (isFunction(item)) {
		this.renderItems(item());
		return;
	}
	if (!isObject(item)) this.createTextNode(item);
	else if (item.hasOwnProperty('t')) this.createElement(item);
	else if (item.hasOwnProperty('pr')) this.createPropertyNode(item);
	else if (item.hasOwnProperty('i')) this.createCondition(item);
	else if (isFunction(item['h'])) this.createForeach(item);	
	else if (item.hasOwnProperty('tmp')) this.includeTemplate(item);
	else if (item.hasOwnProperty('cmp')) this.renderComponent(item);
	else if (item.hasOwnProperty('is')) this.createIfSwitch(item);
	else if (item.hasOwnProperty('sw')) this.createSwitch(item);
	else if (item.hasOwnProperty('pl')) this.createPlaceholder(item);
};
Level.prototype.createLevel = function(items, parentElement) {
	var level = new Level();
	level.setComponent(this.component);
	level.render(items, parentElement, this);
	this.children.push(level);
};
Level.prototype.createTextNode = function(content) {
	if (content == '<br>') this.appendChild(document.createElement('br'));
	else this.appendChild(document.createTextNode(content));
};
Level.prototype.createPropertyNode = function(props) {
	var propName = props['pr'];
	var propNode = document.createTextNode(props['p'] || '');
	this.appendChild(propNode);
	this.propNodes = this.propNodes || {};
	this.propNodes[propName] = this.propNodes[propName] || [];
	this.propNodes[propName].push(this.component.registerPropActivity('nod', propName, propNode));
};
Level.prototype.createElement = function(props) {
	var element = document.createElement(__TAGS[props['t']] || 'span');
	this.appendChild(element);
	if (isObject(props['p'])) {
		var attrName, pn, attr;		
		for (var k in props['p']) {
			if (isString(props['p'][k]) || isNumber(props['p'][k])) {
				attrName = __A[k] || k;
				if (attrName == 'scope') this.component.setScope(element);
				else element.attr(attrName, props['p'][k]);
			} else if (isFunction(props['p'][k])) {
				pn = props['n'][k];
				if (props['n'] && (isArray(pn) || isString(pn))) {
					this.propAttrs = this.propAttrs || {};
					attr = [element, k, props['p'][k]];					
					if (isString(pn)) {
						this.propAttrs[pn] = this.propAttrs[pn] || [];
						this.propAttrs[pn].push(this.component.registerPropActivity('atr', pn, attr));
					} else {
						for (var i = 0; i < pn.length; i++) {					
							this.propAttrs[pn[i]] = this.propAttrs[pn[i]] || [];
							this.propAttrs[pn[i]].push(this.component.registerPropActivity('atr', pn[i], attr));
						}
					}
				}
				var attrParts = props['p'][k]();
				if (!isArray(attrParts)) attrParts = [attrParts];
				var attrValue = '', partValue;
				for (i = 0; i < attrParts.length; i++) {
					partValue = isFunction(attrParts[i]) ? attrParts[i]() : attrParts[i];
					if (partValue) attrValue += partValue;
				}
				if (attrValue) element.attr(__A[k] || k, attrValue);
			}
		}
	}
	if (isArray(props['e'])) {
		var eventType, eventHandler;
		this.eventHandler = this.eventHandler || new EventHandler();
		for (i = 0; i < props['e'].length; i++) {
			eventType = __EVENTTYPES[props['e'][i]] || eventType;
			eventHandler = props['e'][i + 1].bind(this.component);
			var isOnce = props['e'][i + 2] === true;
			if (isString(eventType) && isFunction(eventHandler)) {
				if (isOnce) {
					this.eventHandler.listenOnce(element, eventType, eventHandler);
					i++;
				} else this.eventHandler.listen(element, eventType, eventHandler);
			}
			i++;
		}
	}
	if (isArray(props['c'])) {
		if (props['c'].length == 1 && (isString(props['c'][0]) || isNumber(props['c'][0]))) element.innerHTML = props['c'][0];
		else this.createLevel(props['c'], element);
	} else if (isObject(props['c'])) {
		this.createLevel(props['c'], element);
	} else if (!isUndefined(props['c'])) {
		element.innerHTML = props['c'];
	}
};
Level.prototype.appendChild = function(child) {
	if (this.nextSiblingChild) this.parentElement.insertBefore(child, this.nextSiblingChild);	
	else this.parentElement.appendChild(child);	
	this.registerChild(child);
};
Level.prototype.createCondition = function(params) {
	if (isBool(params['i'])) {
		if (params['i']) {
			this.renderItems(params['c']);
		} else if (!isUndefined(params['e'])) {
			this.renderItem(params['e']);
		}
	} else if (isFunction(params['i']) && isFunction(params['c'])) {
		var propNames = params['p'], pn;
		if (isArray(propNames)) {
			this.conditions = this.conditions || {};
			var condition = new Condition(params);
			condition.render(this.parentElement, this);
			for (var i = 0; i < propNames.length; i++) {
				pn = propNames[i];
				this.conditions[pn] = this.conditions[pn] || [];
				this.conditions[pn].push(this.component.registerPropActivity('cnd', pn, condition));
			}
			this.registerChild(condition);
		} else if (params['i']()) {
			this.renderItems(params['c']());
		} else if (isFunction(params['e'])) {
			this.renderItems(params['e']());
		}
	}
};
Level.prototype.createForeach = function(params) {
	var propName = params['f'];
	var isLocal = !propName;
	if (!isLocal) {
		var foreach = new Foreach(params);
		foreach.render(this.parentElement, this);
		this.foreaches = this.foreaches || {};
		this.foreaches[propName] = this.foreaches[propName] || [];
		this.foreaches[propName].push(this.component.registerPropActivity('for', propName, foreach));
		this.registerChild(foreach);
	} else {
		if (isArray(params['p'])) {
			for (var i = 0; i < params['p'].length; i++) this.renderItems(params['h'](params['p'][i], i));
		} else if (isObject(params['p'])) {
			for (var k in params['p']) this.renderItems(params['h'](params['p'][k], k));
		}
	}
};
Level.prototype.createIfSwitch = function(params) {
	var propNames = params['p'];
	var isLocal = !isArray(propNames) || isUndefined(propNames[0]);
	if (!isLocal) {
		var swtch = new IfSwitch(params);
		swtch.render(this.parentElement, this);
		this.ifSwitches = this.ifSwitches || {};
		for (var i = 0; i < propNames.length; i++) {
			this.ifSwitches[propNames[i]] = this.ifSwitches[propNames[i]] || [];
			this.ifSwitches[propNames[i]].push(this.component.registerPropActivity('isw', propNames[i], swtch));
		}
	} else {
		for (var i = 0; i < params['is'].length; i++) {
			if (!!params['is'][i]) {
				this.renderItems(this.params['c'][i]);
				return;
			}
		}
		if (isArray(this.params['d'])) this.renderItems(this.params['d']);
	}
};
Level.prototype.createSwitch = function(params) {
	var propName = params['p'];
	var isLocal = !propName;
	if (!isLocal) {
		var swtch = new Switch(params);
		swtch.render(this.parentElement, this);
		this.switches = this.switches || {};
		this.switches[propName] = this.switches[propName] || [];
		this.switches[propName].push(this.component.registerPropActivity('swt', propName, swtch));
	} else {
		for (var i = 0; i < this.params['s'].length; i++) {
			if (this.params['sw'] === this.params['s'][i]) {
				this.renderItems(this.params['c'][i]);
				return;
			}
		}
		if (isArray(this.params['d'])) this.renderItems(this.params['d']);
	}
};
Level.prototype.createPlaceholder = function(params) {
	var placeholderNode = document.createTextNode('');
	if (isString(params['d'])) placeholderNode.textContent = params['d'];
	placeholderNode.placeholderName = params['pl'];
	this.appendChild(placeholderNode);	
};
Level.prototype.registerChild = function(child, isComponent) {
	var isNodeChild = isNode(child);
	if (this.prevChild) this.prevChild.setNextSiblingChild(child);
	this.prevChild = isNodeChild ? null : child;
	if (!this.firstChild) this.firstChild = child;
	if (isNodeChild) {
		if (!this.firstNodeChild) this.firstNodeChild = child;
		this.lastNodeChild = child;
	} else this.children.push(child);
	if (isComponent) this.component.registerChildComponent(child);
};
Level.prototype.includeTemplate = function(item) {
	if (isString(item['tmp'])) item['tmp'] = this.component.getTemplateByKey(item['tmp']);
	if (isFunction(item['tmp'])) {		
		var items = item['tmp'].call(this.component, this.component, item['p']);
		if (isArray(items)) {
			for (var i = 0; i < items.length; i++) this.renderItem(items[i]);
		}
	}
};
Level.prototype.renderComponent = function(item, parentElement) {
	parentElement = parentElement || this.parentElement;
	if (isFunction(item['cmp'])) {
		var props = {};
		var value, i, k, cmpid;
		var isProps = isObject(item['p']);
		if (isProps) {
			for (k in item['p']) {
				value = item['p'][k];
				if (k == 'cmpid') {
					cmpid = value;
					continue;
				}
				if (isFunction(item['p'][k])) value = item['p'][k]();
				props[k] = value;
			}
		}
		var component = new item['cmp'](props);
		if (isArray(item['w'])) {
			for (i = 0; i < item['w'].length; i+=2) this.component.provideWithComponent(item['w'][i], item['w'][i + 1], component);
		}
		component.setParent(this.component);
		component.render(parentElement);
		if (cmpid) {
			component.setId(cmpid);
			var waiting = this.component.getWaitingChild(cmpid);
			if (isArray(waiting)) {
				for (i = 0; i < waiting.length; i++) {
					waiting[i][0].set(waiting[i][1], component);
				}
			}
		}
		this.registerChild(component, true);
		if (isProps) this.registerPropComps(component, item['n'], item['p']);
		var events = item['e'];
		if (isArray(events)) {
			for (i = 0; i < events.length; i++) {
				component.subscribe(events[i], events[i + 1], this.component);
				i++;	
			}
		}
	} else if (item && isObject(item)) {
		if (!item.isRendered()) item.render(parentElement);
		this.registerChild(item, true);
	}
};
Level.prototype.registerPropComps = function(component, names, props) {
	this.propComps = this.propComps || {};
	var data;
	for (var k in props) {
		data = [component, props[k], k == 'args'];
		if (isObject(names) && (isArray(names[k]) || isString(names[k]))) {
			if (isString(names[k])) {
				this.registerPropComp(names[k], data);
			} else {
				for (i = 0; i < names[k].length; i++) this.registerPropComp(names[k][i], data);
			}
		}
	}
};
Level.prototype.registerPropComp = function(pn, data) {
	this.propComps[pn] = this.propComps[pn] || [];
	this.propComps[pn].push(this.component.registerPropActivity('cmp', pn, data));
};
Level.prototype.getParentElement = function() {
	return this.parentElement;
};
Level.prototype.getFirstNodeChild = function() {
	if (isNode(this.firstChild)) return this.firstChild;
	var firstLevel = this.children[0];
	if (firstLevel instanceof Level) {
		return firstLevel.getParentElement();
	} else if (firstLevel) {
		return firstLevel.getFirstNodeChild();
	}
	return null;
};
Level.prototype.disposeDom = function() {
	var elementsToDispose = this.getElements();
	for (var i = 0; i < elementsToDispose.length; i++) this.parentElement.removeChild(elementsToDispose[i]);
	elementsToDispose = null;
};
Level.prototype.setAppended = function(isAppended) {
	var isDetached = !isAppended;
	if (isDetached === this.detached) return;
	this.detached = isDetached;
	var elements = this.getElements();
	if (isDetached) {
		this.realParentElement = this.parentElement;
		this.parentElement = document.createElement('div'); 
		for (var i = 0; i < elements.length; i++) this.parentElement.appendChild(elements[i]);
	} else {
		this.nextSiblingChild = this.parentLevel.getNextSiblingChild();
		this.parentElement = this.realParentElement;
		this.realParentElement = null;
		for (var i = 0; i < elements.length; i++) this.appendChild(elements[i]);
	}
};
Level.prototype.getElements = function() {
	var elements = [];
	if (this.firstNodeChild && this.lastNodeChild) {
		var isAdding = false;
		for (var i = 0; i < this.parentElement.childNodes.length; i++) {
			if (this.parentElement.childNodes[i] == this.firstNodeChild) isAdding = true;
			if (isAdding) elements.push(this.parentElement.childNodes[i]);
			if (this.parentElement.childNodes[i] == this.lastNodeChild) break;
		}
	}
	return elements;
};
Level.prototype.dispose = function() {
	for (var i = 0; i < this.children.length; i++) this.children[i].dispose();
	if (this.eventHandler) {
		this.eventHandler.dispose();
		this.eventHandler = null;
	}
	this.disposeDom();
	if (this.propComps) {
		this.component.disposePropActivities('cmp', this.propComps);
		this.propComps = null;
	}
	if (this.conditions) {
		this.component.disposePropActivities('cnd', this.conditions);
		this.conditions = null;
	}
	if (this.foreaches) {
		this.component.disposePropActivities('for', this.foreaches);
		this.foreaches = null;
	}
	if (this.propNodes) {
		this.component.disposePropActivities('nod', this.propNodes);
		this.propNodes = null;
	}
	if (this.propAttrs) {
		this.component.disposePropActivities('atr', this.propAttrs);
		this.propAttrs = null;
	}
	if (this.ifSwitches) {
		this.component.disposePropActivities('isw', this.ifSwitches);
		this.ifSwitches = null;
	}
	if (this.switches) {
		this.component.disposePropActivities('swt', this.switches);
		this.switches = null;
	}
	this.children = null;
	this.parentElement = null;
	this.parentLevel = null;
	this.firstChild = null;
	this.firstNodeChild = null;
	this.lastNodeChild = null;
	this.realParentElement = null;
	this.component = null;
};
function Menu() {};
Menu.prototype.doRendering = function() {
	Component.prototype.doRendering.call(this);
	if (Router.hasMenu(this)) {
		this.onNavigate(Router.getCurrentRouteName());
	}
};
Menu.prototype.onNavigate = function(viewName) {
	if (this.rendered) {
		if (isElement(this.activeButton)) {
			this.setButtonActive(this.activeButton, false);	
		}
		var button = this.getButton(viewName);
		if (isElement(button)) {
			this.setButtonActive(button, true);
		}
	}
};
Menu.prototype.getButton = function(viewName) {
	return this.findElement('a[role="' + viewName + '"]');
};
Menu.prototype.setButtonActive = function(button, isActive) {
	var activeClassName = this.activeButtonClass || 'active';
	button.toggleClass(activeClassName, isActive);
	if (isActive) {
		this.activeButton = button;
	}
};
Menu.prototype.disposeInternal = function() {
	this.activeButton = null;
};
function Switch(params) {
	this.value = params['sw'];
	this.values = params['s'];
	this.default = params['d'];
	this.handler = params['c'];
	this.levels = [];
}
Switch.prototype.createLevels = function(isUpdating) {
	var children = this.handler();
	for (var i = 0; i < this.values.length; i++) {
		if (this.value === this.values[i]) {
			for (var j = 0; j < children[i].length; j++) this.createLevel(children[i][j], isUpdating);
			return;
		}
	}
	if (isArray(this.default)) {
		for (i = 0; i < this.default.length; i++) this.createLevel(this.default[i], isUpdating);
	}
};
Switch.prototype.update = function(value) {
	this.value = value;
	this.disposeLevels();
	this.createLevels(true);
};
Switch.prototype.dispose = function() {
	this.disposeLinks();
	this.disposeLevels();
	this.levels = null;
	this.parentElement = null;
	this.parentLevel = null;
	this.value = null
	this.values = null;
	this.default = null;
	this.handler = null;
	this.nextSiblingChild = null;
	this.prevSiblingChild = null;
};
function View() {}
View.prototype.onRenderComplete = function() {
	this.dispatchReadyEvent();
};
View.prototype.setOnReadyHandler = function(handler) {
	this.onReadyHandler = handler;
};
View.prototype.dispatchReadyEvent = function() {
	if (isFunction(this.onReadyHandler)) {
		this.onReadyHandler();
	}
};
View.prototype.activate = function(isActivated) {
	if (isActivated) {
		this.dispatchReadyEvent();
	}
};
View.prototype.initControllers = function() {
	var controllersToLoad = this.getControllersToLoad();
	if (isArray(controllersToLoad)) {
		for (var i = 0; i < controllersToLoad.length; i++) {
			if (isObject(controllersToLoad[i])) {
				controllersToLoad[i].load();
			}
		}
	}
};
View.prototype.getTitleParams = function() {};
View.prototype.getControllersToLoad = function() {
	return null;
};
function CheckboxHandler() {
	var subscribers = [];
	var options = [];
	var defaultCheckboxClass = 'app-ui-checkbox';
	var defaultCheckboxCheckedClass = 'checked';
	var currentOptions, currentObject, currentScope, checkbox, labelClass,
		checkboxClass, targetClasses, currentCheckedClass, currentTarget;
	this.subscribe = function(subscriber, opts) {
		if (isFunction(opts['callback']) && subscribers.indexOf(subscriber) == -1) {
			subscribers.push(subscriber);
			options.push(opts || null);
			var element = subscriber.getElement();
			if (element) {
				var index = subscribers.length - 1;
				element.addEventListener('click', onClick.bind(null, index), false);
			}
		}
	};
	var onClick = function(index, e) {
		currentTarget = e.target;
		defineOptions(index);
		defineTargetClasses();
		if (isProperTarget()) {
			defineCheckbox();
			defineCheckedClass();			
			var checked = !isChecked();
			if (currentTarget) currentTarget.toggleClass(currentCheckedClass, checked);
			if (checkbox) {
				checkbox.toggleClass(currentCheckedClass, checked);
				currentOptions['callback'].call(currentObject, {
					'target': checkbox,
					'name': getName(),
					'value': getValue(),
					'checked': checked,
					'intChecked': checked ? 1 : 0
				});
			}
		}
	};
	var defineOptions = function(index) {
		currentOptions = options[index];
		currentObject = subscribers[index];
		currentScope = currentObject.getElement();
	};
	var defineTargetClasses = function() {
		targetClasses = [];
		defineCheckboxClass();
		if (checkboxClass) targetClasses.push(checkboxClass);
		labelClass = Objects.get(currentOptions, 'labelClass');
		if (isString(labelClass)) targetClasses.push(labelClass);
		else if (isArray(labelClass)) targetClasses = targetClasses.concat(labelClass);
	};
	var defineCheckboxClass = function(options) {
		checkboxClass = Objects.get(options || currentOptions, 'checkboxClass', defaultCheckboxClass);
	};
	var isProperTarget = function() {
		while (currentTarget) {
			if (targetClasses.hasIntersections(currentTarget.getClasses())) return true;
			currentTarget = currentTarget.parentNode;
			if (currentTarget == currentScope) break;
		}
		return false;
	};
	var defineCheckbox = function() {
		if (currentTarget.hasClass(checkboxClass)) {
			checkbox = currentTarget;
			currentTarget = null;
			if (isString(labelClass)) currentTarget = checkbox.getAncestor('.' + labelClass);
			else if (isArray(labelClass))  {
				for (var i = 0; i < labelClass.length; i++) {
					currentTarget = checkbox.getAncestor('.' + labelClass[i]);
					if (currentTarget) break;
				}
			}
		} else checkbox = currentTarget.find('.' + checkboxClass);
	};
	var defineCheckedClass = function() {
		currentCheckedClass = Objects.get(currentOptions, 'checkboxCheckedClass', defaultCheckboxCheckedClass);
	};
	var isChecked = function() {
		if (checkbox) return checkbox.hasClass(currentCheckedClass);
		return currentTarget.hasClass(currentCheckedClass);
	};
	var getValue = function() {
		var value;
		if (checkbox) value = checkbox.getData('value');
		return isIntValue() ? ~~value : value;
	};
	var getName = function() {
		if (checkbox) return checkbox.getData('name');
	};
	var isIntValue = function() {
		return Objects.has(currentOptions, 'intValue', true);
	};
	var getOptionsOfSubscriber = function(subscriber) {
		return options[subscribers.indexOf(subscriber)];
	};
	var getCheckboxByName = function(name, subscriber) {
		currentOptions = getOptionsOfSubscriber(subscriber);
		defineCheckboxClass();
		return subscriber.findElement('.' + checkboxClass + '[_name="' + name + '"]');
	};
	this.isChecked = function(name, subscriber) {
		var checkbox = getCheckboxByName(name, subscriber);
		defineCheckedClass();
		return checkbox && checkbox.hasClass(currentCheckedClass);
	};
	this.getValue = function(name, subscriber) {
		var checkbox = getCheckboxByName(name, subscriber);
		if (checkbox) return checkbox.getData('value');
	};
}
CheckboxHandler = new CheckboxHandler();
function ClickHandler() {
	var subscribers = [];
	var eventHandler = new EventHandler();
	this.subscribe = function(subscriber, options) {
		if (subscribers.indexOf(subscriber) == -1) {
			eventHandler.listen(subscriber.getElement(), 'click', onClick.bind(null, options, subscriber));
			subscribers.push(subscriber);
		}
	};
	this.unsubscribe = function(subscriber) {
		var idx = subscribers.indexOf(subscriber);
		if (idx > -1) {
			eventHandler.unlisten(subscriber.getElement(), 'click');
			subscribers.splice(idx, 1);
		}
	};
	var onClick = function(options, subscriber, e) {
		var target;
		for (var k in options) {
			target = e.getTargetWithClass(k);
			if (target) {
				if (isFunction(options[k])) {
					options[k].call(subscriber, e, target);
					break;
				}
			}
		}
	};
}
ClickHandler = new ClickHandler();
function Dates() {
	var date;
	var months = ["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"];
	var months2 = ["\u044f\u043d\u0432\u0430\u0440\u044f","\u0444\u0435\u0432\u0440\u0430\u043b\u044f","\u043c\u0430\u0440\u0442\u0430","\u0430\u043f\u0440\u0435\u043b\u044f","\u043c\u0430\u044f","\u0438\u044e\u043d\u044f","\u0438\u044e\u043b\u044f","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u043e\u043a\u0442\u044f\u0431\u0440\u044f","\u043d\u043e\u044f\u0431\u0440\u044f","\u0434\u0435\u043a\u0430\u0431\u0440\u044f"];
	this.getYear = function() {
		return get().getFullYear();
	};
	this.getDay = function() {
		return get().getDate();
	};
	this.getDate = function() {
		var date = get();
		return {day: date.getDate(), month: date.getMonth(), year: date.getFullYear()};
	};
	this.getMonth = function() {
		return get().getMonth();
	};
	this.getMonthName = function() {
		if (isNumber(arguments[0])) {
			return months[arguments[0]];
		}
		return months[this.getMonth()];
	};
	this.getTimeStamp = function() {
		return new Date().getTime();
	};
	this.getDays = function(month, year) {
		return 33 - new Date(year, month, 33).getDate();
	};
	this.getWeekDay = function(day, month, year) {
		return new Date(year, month, day).getDay();
	};
	this.getFormattedDate = function(stringDate, format) {
		format = format.toLowerCase();
		stringDate = stringDate.split(/[ \.-]+/);
		var y, y2, ys, m2, d, d2;
		var s0 = ~~stringDate[0], m = ~~stringDate[1], s2 = ~~stringDate[2];
		if (s2) {
			m2 = m < 10 ? '0' + m : m;
			if (s2 > 100) {
				y = s2;
				d = s0;
			} else {
				d = s2;
				y = s0;
			}
			d2 = d < 10 ? '0' + d : d;
			ys = y + '';
			y2 = ys.charAt(2) + ys.charAt(3);
		} else {
			return stringDate;
		}
		format = format.replace(/y{4}/, y);
		format = format.replace(/y{2}/, y2);
		format = format.replace(/month/, months2[m - 1]);
		format = format.replace(/m{2}/, m2);
		format = format.replace(/m{1}/, m);
		format = format.replace(/d{2}/, d2);
		format = format.replace(/d{1}/, d);
		return format;
	};
	var get = function() {
		return new Date();
	};
}
Dates = new Dates();
function Decliner() {
	var words = __DW;
	this.getCount = function(key, num) {
		if (isArray(num)) num = num.length;
		return num + ' ' + this.get(key, num);
	};
	this.get = function(key, num) {
		if (isArray(num)) num = num.length;
		if (!isNumber(num)) return '';
		return Objects.get(Objects.get(words, key, '').split(','), getVariant(num), '');
	};
	var getVariant = function(num) {
		var n, m;
		num = num.toString();
		m = num.charAt(num.length - 1); 		
		if (num.length > 1) n = num.charAt(num.length - 2); 
		else n = 0;
		if (n == 1) return 2;
		else { 
			if (m == 1) return 0;
			else if (m > 1 && m < 5) return 1;
			else return 2;
		}
	};
}
Decliner = new Decliner();
function Dialoger() {
	var dialogs = {};
	var currentDialogId, currentDialogClass, currentDialog,
		currentDialogOptions;
	this.show = function(dialogClass, options, dialogId) {
		if (isFunction(dialogClass)) {
			currentDialogClass = dialogClass;
			currentDialogOptions = options;
			defineDialogId(dialogId);
			defineDialog();
			showDialog();
		}
	};
	var defineDialogId = function(dialogId) {
		currentDialogId = currentDialogClass.name + (isString(dialogId) ? '_' + dialogId : '');
	};
	var defineDialog = function() {
		if (isUndefined(dialogs[currentDialogId])) {
			dialogs[currentDialogId] = new currentDialogClass();
			dialogs[currentDialogId].render(document.body);
		}
		currentDialog = dialogs[currentDialogId];
	};
	var showDialog = function() {
		if (isObject(currentDialogOptions)) {
			currentDialog.set(currentDialogOptions);
		}
		currentDialog.show();
	};
	var closeAll = function() {
		for (var k in dialogs) {
			dialogs[k].hide();
		}
	};
	window.addEventListener('popstate', closeAll);
}
Dialoger = new Dialoger();
function Dictionary() {
	var onLoadCallback;
	var items = {};
	this.load = function(callback) {
		var url = __DICTURL;
		if (!isNone(url)) {
			onLoadCallback = callback;
			var request = new AjaxRequest(url, onLoad.bind(this));
			request.send('GET');
		} else {
			callback();
		}
	};
	this.get = function(key, defaultValue) {
		return Objects.get(items, key, defaultValue);
	};
	this.set = function(key, value) {
		items[key] = value;
	};
	var onLoad = function(data) {
		if (isObject(data)) {
			items = data;
		}
		onLoadCallback();
	};
}
Dictionary = new Dictionary();
var __D = Dictionary;
function Globals() {
	var listeners = {};
	var components = {};
	var views = {};
	var globalVars = {};
	this.addView = function(view, key) {
		if (isUndefined(views[key])) {
			views[key] = view;
		}
	};
	this.getView = function(key) {
		return views[key];
	};
	this.addComponent = function(component, key) {
		if (isUndefined(components[key])) {
			components[key] = component;
		}
	};
	this.getComponent = function(key) {
		return components[key];
	};
	this.removeComponent = function(key) {
		delete components[key];
	};
	this.subscribe = function(globalVarName, callback, subscriber) {
		if (!isArray(listeners[globalVarName])) {
			listeners[globalVarName] = [];
		}
		listeners[globalVarName].push([callback, subscriber]);
	};
	this.unsubscribe = function(subscriber, globalVarName) {
		if (isArray(listeners[globalVarName])) {
			var done = false;
			while (!done) {
				done = true;
				for (var i = 0; i < listeners[globalVarName].length; i++) {
					if (listeners[globalVarName][i][1] == subscriber) {
						listeners[globalVarName].splice(i, 1);
						done = false;
						break;
					}
				}
			}
		}
	};
	this.get = function(globalVarName) {
		return globalVars[globalVarName];
	};
	this.set = function(globalVarName, globalVarValue) {
		globalVars[globalVarName] = globalVarValue;
		if (isArray(listeners[globalVarName])) {
			for (var i = 0; i < listeners[globalVarName].length; i++) {
				if (isFunction(listeners[globalVarName][i][0])) {
					listeners[globalVarName][i][0].call(listeners[globalVarName][i][1] || null, globalVarValue, globalVarName);
				}
			}
		}
	};
	this.has = function(globalVarName, globalVarValue) {
		return Objects.has(globalVars, globalVarName, globalVarValue);
	};
}
Globals = new Globals();
function Popuper() {
	var components;
	var elements;
	var reset = function() {
		components = [];
		elements = [];
	};
	this.watch = function(component, element) {
		if (components.indexOf(component) == -1) {
			components.push(component);
			elements.push(element || component.getElement() || null);
		}
	};
	var onBodyMouseDown = function(e) {
		for (var i = 0; i < components.length; i++) {
			if (!isElement(elements[i]) || !e.targetHasAncestor(elements[i])) {
				components[i].hide();
				reset();
			}
		}
	};
	reset();
	var body = document.documentElement;
	body.addEventListener('mousedown', onBodyMouseDown, false);
}
Popuper = new Popuper();
function ResizeHandler() {
	var subscribers = [], timer;	
	this.subscribe = function(subscriber, options) {
		subscribers.push([subscriber, options]);
	};
	var onResize = function() {
		window.clearTimeout(timer);
		timer = window.setTimeout(function() {
			for (var i = 0; i < subscribers.length; i++) {
				var callback = Objects.get(subscribers[i][1], 'callback');
				if (isFunction(callback)) callback.call(subscribers[i][0]);
			}
		}, 200);
	};
	window.addEventListener('resize', onResize, false);
}
ResizeHandler = new ResizeHandler();
function StoreKeeper() {
	var prefix = 'stored_';
	var secondsInMeasures = {
		'month': 2592000,
		'day'  : 86400,
		'hour' : 3600,
		'min'  : 60
	};
	this.set = function(key, value) {
		var localStorageKey = getLocalStorageKey(key);
		var item = JSON.stringify({
			'data': value,
			'timestamp': (window['Date']['now']()).toString()
		});
		window.localStorage.setItem(localStorageKey, item);
	};
	this.get = function(key) {
		var item = getItem(key);
		return Objects.has(item, 'data') ? item['data'] : null;
	};
	this.getActual = function(key, period) {
		var item = getItem(key);
		return Objects.has(item, 'data') && isActual(item['timestamp'], period) ? item['data'] : null;
	};
	this.remove = function(key) {
		var localStorageKey = getLocalStorageKey(key);
		window.localStorage.removeItem(localStorageKey);
	};
	var isActual = function(savedMilliseconds, period) {
		var nowMilliseconds    = window['Date']['now'](),
			periodMilliseconds = getMilliseconds(period);
		if (isString(savedMilliseconds)) {
			savedMilliseconds = stringToNumber(savedMilliseconds);
		}
		return periodMilliseconds && savedMilliseconds && nowMilliseconds - savedMilliseconds < periodMilliseconds;
	};
	var getItem = function(key) {
		var localStorageKey = getLocalStorageKey(key);
		var item = window.localStorage.getItem(localStorageKey);
		if (!item) return null;
		try {
			item = JSON.parse(item);
		} catch (exception) {
			log('Json parse exception', 'getItem', this, {'item': item});
			return null;	
		}
		return item;
	};
	var getMilliseconds = function(period) {
		var periodNumber  = ~~period.replace(/[^\d]/g, '');
		var periodMeasure =   period.replace(/\d/g, '');
		if (!periodNumber) {
			log('Given period number is empty', 'getMilliseconds', this);
			return 0;		
		}
		if (!secondsInMeasures[periodMeasure]) {
			log('No given measure: ' + periodMeasure, 'getMilliseconds', this);
			return 0;
		}
		return secondsInMeasures[periodMeasure] * periodNumber * 1000;
	};
	var getLocalStorageKey = function(key) {
		return prefix + key;
	};
}
StoreKeeper = new StoreKeeper();
function Tooltiper() {
	var target, eventHandler, event;
	var request, tooltipElement, timer;
	var tooltip = __TC, tooltipApi = __TA;
	var tooltipClass = 'tooltiped';
	var addClass, text, position, key,
		caption, delay, corrector;
	var onBodyMouseOver = function(e) {
		event = e;
		target = e.target;
		if (target.hasClass(tooltipClass)) {
			init();
			if (text) {
				if (delay) {
					showWithDelay()
				} else {
					show();
				}
			} else if (key) {
				load();
			}
		}
	};
	var init = function() {
		window.clearTimeout(timer);
		if (isFunction(tooltip)) {
			createPopup();
		}
		key = '';
		text = target.attr('txt');
		addClass = target.attr('cls');
		position = target.attr('pos');
		caption = target.attr('cap');
		delay = target.attr('del');
		corrector = target.attr('cor');
		if (!text) {
			key = target.attr('key');
		}
		eventHandler.listenOnce(target, 'mouseleave', onLeave);
	};
	var createPopup = function() {
		tooltip = new tooltip();
		tooltip.render(document.body);
		tooltipElement = tooltip.getElement();
	};
	var showWithDelay = function() {
		timer = window.setTimeout(show, 500);
	};
	var show = function() {
		tooltip.set({
			'shown': true,
			'corrector': corrector,
			'caption': caption,
			'text': text
		});
		var coords = getCoords();
		tooltip.set({
			'left': Math.round(coords.x),
			'top': Math.round(coords.y)
		});
	};
	var getCoords = function() {
		var marginLeft = 0, marginTop = 0;		
		var rect = target.getRect();
		var tooltipRect = tooltipElement.getRect();
		var coordX  = rect.left;
		var coordY  = rect.top;
		var coords = {x: coordX, y: coordY};
		switch (position) {
			case 'left': 
				coords.y += Math.round(rect.height / 2) - 20;
			break;
			case 'bottom': 
				coords.x += Math.round(rect.width / 2);
				coords.y += rect.height + 5;
			break;
			case 'top': 
				coords.x += Math.round(rect.width / 2);
			break;
			case 'left-bottom': 
				coords.y += rect.height + 5;
			break;
			case 'right-bottom': 
				coords.x += rect.width;
				coords.y += rect.height + 5;
			break;
			case 'left-top': 
				coords.x += rect.width;
			break;
			case 'right-top': 
				coords.x += rect.width;
			break;
			default:
				coords.x += rect.width + 15;
				coords.y += Math.round(rect.height / 2) - 20;
		}
		if (position == 'left') {
			marginLeft = -tooltipRect.width - 10;
		} else if (position == 'top' || position == 'bottom') {
			marginLeft = -Math.round(tooltipRect.width / 2);
		} else if (position == 'right-top' || position == 'right-bottom') {
			marginLeft = -tooltipRect.width;
		} else if (position == 'left-top') {
			marginLeft = -rect.width;
		}
		if (position == 'top' || position == 'left-top' || position == 'right-top') {
			marginTop = -tooltipRect.height - 10;
		}
		if (rect.width < 30 && ['left-bottom', 'right-bottom', 'bottom', 'left-top', 'right-top', 'top'].indexOf(position) != -1) {
			coords.x -= 15;
		}
		coords.x += marginLeft;
		coords.y += marginTop;
		return coords;
	};
	var onLeave = function() {
		window.clearTimeout(timer);
		tooltip.set('shown', false);
	};
	var load = function() {
		if (isString(tooltipApi)) {
			if (isUndefined(request)) {
				request = new AjaxRequest(tooltipApi, onLoad);
			}
			request.execute({'name': key});
		}
	};
	var onLoad = function(data) {
		text = Objects.get(data, 'text');
		var cap = Objects.get(data, 'caption');
		if (cap && isString(cap)) {
			caption = cap;
			target.attr('cap', cap);
		}
		if (text && isString(text)) {
			target.attr('txt', text);
			show();
		}
	};
	if (isFunction(tooltip)) {
		eventHandler = new EventHandler();
		var body = document.documentElement;
		body.addEventListener('mouseover', onBodyMouseOver, false);
	}
}
Tooltiper = new Tooltiper();
Array.prototype.contains = function(v) {
	var iv = ~~v;
	if (iv == v) return this.indexOf(iv) > -1 || this.indexOf(v + '') > -1;
	return this.indexOf(v) > -1;
};
Array.prototype.removeDuplicates = function() {
	this.filter(function(item, pos, self) {
	    return self.indexOf(item) == pos;
	});
	return this;
};
Array.prototype.getIntersections = function(arr) {
	return this.filter(function(n) {
	    return arr.indexOf(n) != -1;
	});
};
Array.prototype.hasIntersections = function(arr) {
	return !isUndefined(this.getIntersections(arr)[0]);
};
var StyleNameCache = {};
Element.prototype.setClass = function(className) {
	this.className = className.trim();
}
Element.prototype.toggleClass = function(className, isAdding) {
	if (isAdding) {
		this.addClass(className);
	} else {
		this.removeClass(className);
	}
};
Element.prototype.switchClasses = function(className1, className2) {
	var classes = this.getClasses();
	if (classes.contains(className1)) { 
		this.removeClass(className1);
		this.addClass(className2);
	} else if (classes.contains(className2)) {
		this.removeClass(className2);
		this.addClass(className1);
	}
};
Element.prototype.addClass = function(className) {
	if (isString(className)) {
		var classNames = this.getClasses();
		var addedClasses = className.split(' ');
		for (var i = 0; i < addedClasses.length; i++) {
			if (classNames.indexOf(addedClasses[i]) == -1) {
				classNames.push(addedClasses[i]);
			}
		}
		this.className = classNames.join(' ');
	}
};
Element.prototype.removeClass = function(className) {
	if (isString(className)) {
		var classNames = this.getClasses();
		var removedClasses = className.split(' ');
		var newClasses = [];
		for (var i = 0; i < classNames.length; i++) {
			if (removedClasses.indexOf(classNames[i]) == -1) {
				newClasses.push(classNames[i]);
			}
		}
		this.className = newClasses.join(' ');
	}
};
Element.prototype.hasClass = function(className) {
	return this.getClasses().indexOf(className) > -1;
};
Element.prototype.getClasses = function() {
	var classNames = (this.className || '').trim().replace(/ {2,}/g, ' ');
	if (classNames) {
		return classNames.split(' ');
	}
	return [];
};
Element.prototype.getAncestor = function(selector) {
	if (isNone(selector) || !isString(selector)) {
		return null;
	}
	if (isFunction(Element.prototype.closest)) {
		return this.closest(selector);
	}
	var parts = selector.trim().split(' ');
	var properSelector = parts[parts.length - 1];
	var classes = properSelector.split('.');
	var selectorTag;
	var thisTag = this.tagName.toLowerCase();
	if (!isNone(classes[0])) {
		selectorTag = classes[0].toLowerCase();
	}
	Objects.removeAt(classes, 0);
	var element = this, isSameTag, foundClasses, elementClasses;
	while (element) {
		elementClasses = element.getClasses();
		isSameTag = isUndefined(selectorTag) || selectorTag == thisTag;
		foundClasses = 0;
		for (var i = 0; i < elementClasses.length; i++) {
			if (classes.indexOf(elementClasses[i]) > -1) {
				foundClasses++;
			}
		}
		if (foundClasses == classes.length && isSameTag) {
			return element;
		}
		element = element.parentNode;
	}
	return null;
};
Element.prototype.getData = function(name) {
	return this.getAttribute('_' + name) || '';
};
Element.prototype.getRect = function() {
	return this.getBoundingClientRect();
};
Element.prototype.setWidth = function(width) {
	this.style.width = isNumber(width) ? width + 'px' : width;
};
Element.prototype.setHeight = function(height) {
	this.style.height = isNumber(height) ? height + 'px' : height;
};
Element.prototype.getWidth = function() {
	return this.getRect().width;
};
Element.prototype.getHeight = function() {
	return this.getRect().height;
};
Element.prototype.getTop = function() {
	return this.getRect().top;
};
Element.prototype.getLeft = function() {
	return this.getRect().left;
};
Element.prototype.setStyle = function(style) {
	var element = this;
	var set = function(value, style) {
		var propertyName = getVendorJsStyleName(style);	
		if (propertyName) {
			element.style[propertyName] = value;
		}
	};
	var getVendorJsStyleName = function(style) {
		var propertyName = StyleNameCache[style];
		if (!propertyName) {
			propertyName = toCamelCase(style);
	    	StyleNameCache[style] = propertyName;
	  	}	
		return propertyName;
	};
	if (typeof style == 'string') {
	    set(value, style);
	} else {
		for (var key in style) {
	  		set(style[key], key);
	   	}
	}
};
Element.prototype.getChildAt = function(index) {
	return this.childNodes[index];
};
Element.prototype.attr = function(attrName) {
	if (!isUndefined(arguments[1])) {
		if (attrName == 'class') {
			this.setClass(arguments[1]);
		} else if (attrName == 'value') {
			this.value = arguments[1];
		} else {
			this.setAttribute(attrName, arguments[1]);
		}
	} else {
		return this.getAttribute(attrName);
	}
};
Element.prototype.show = function(isShown) {
	var display = isString(isShown) ? isShown : (isShown ? 'block' : 'none');
	this.style.display = display;
};
Element.prototype.find = function(selector) {
	return this.querySelector(selector);
};
MouseEvent.prototype.getTarget = function(selector) {
	return this.target.getAncestor(selector);
};
MouseEvent.prototype.getTargetData = function(selector, dataAttr) {
	var target = this.getTarget(selector);
	return !!target ? target.getData(dataAttr) : '';
};
MouseEvent.prototype.targetHasAncestor = function(element) {
	if (isElement(element)) {
		var target = this.target;		
		while (target) {
			if (target == element) {
				return true;
			}
			target = target.parentNode;
		}
	}
	return false;
};
MouseEvent.prototype.targetHasClass = function(className) {
	return this.target.hasClass(className) || (!!this.target.parentNode && this.target.parentNode.hasClass(className));
};
MouseEvent.prototype.getTargetWithClass = function(className) {
	if (this.target.hasClass(className)) return this.target;
	if (!!this.target.parentNode && this.target.parentNode.hasClass(className)) return this.target.parentNode;
	return null;
};
function AjaxRequest(url, callback, params) {
	var self = this, tempUrl, active = false, 
		withCredentials = false, headers, request, 
		responseType;
	this.setHeaders = function(head) {
		headers = head;
	};
	this.setResponseType = function(respType) {
		responseType = respType;
	};
	this.setWithCredentials = function(withCred) {
		withCredentials = withCred;
	};
	this.execute = function(pars) {
		active = true;
		pars = pars || params;
		var u = tempUrl || url,
			method = this.method || 'POST',
			content = getRequestContent(method, pars);
		createRequest();
		if (method == 'GET') {
			u += content;
			content = '';
		}
		try {
		    request.open(method, correctUrl(u), true);
		} catch (err) {
		    log('Error opening XMLHttpRequest: ' + err.message, 'execute', this);
		    return;
		}
		if (isObject(headers)) {
			for (var k in headers) {
		    	request.setRequestHeader(k, headers[k]);
			};
		}
		if (method != 'GET' && (!headers || !headers['Content-Type'])) {
			request.setRequestHeader('Content-Type', 'application/json');
		}
		if (responseType) {
			request.responseType = responseType;
		}
		request.withCredentials = withCredentials;
		request.send(content);
	};
	this.send = function(method, pars, u) {
		this.method = method;
		tempUrl = u;
		this.execute(pars);
		this.method = null;
		tempUrl = null;
	};
	var correctUrl = function(u) {
		u = u.replace(/^[\.\/]+/, '');
		if (isString(__APIDIR)) {
			var regExp = new RegExp('^' + __APIDIR + "\/");
			u = __APIDIR + '/' + u.replace(regExp, '');
		}
		return '/' + u;
	};
	var createRequest = function() {
		request = new XMLHttpRequest();
		request.onreadystatechange = onReadyStateChange.bind(self);
	};
	var getRequestContent = function(method, pars) {
		if (Objects.empty(pars)) return '';
		if (!isObject(pars)) {
			return pars.toString();
		} else if (pars instanceof FormData) {
			return pars;
		} else if (method == 'GET') {
			var content = [];
			for (var k in pars) {				
				content.push(k + '=' + (!!pars[k] || pars[k] == 0 ? pars[k] : '').toString());
			}
			return '?' + content.join('&');
		}
		return JSON.stringify(pars || '');
	};
	var onReadyStateChange = function(e) {
		var req = e.target;
		if (active && req.readyState == 4) {
			active = false;
			var response = req.response;
			var data;
			try {
				data = JSON.parse(response);
			} catch (e) {
				data = response;
			}
			if (isFunction(callback)) {
				callback(data);
			}
		}
	};
}
function EventHandler() {
	var listeners;
	this.listen = function(element, type, handler) {
		listeners = listeners || [];
		listeners.push([element, type, handler]);
		element.addEventListener(type, handler, false);
	};
	this.listenOnce = function(element, type, handler) {
		var callback = function() {
			handler();
			element.removeEventListener(type, callback, false);
		}
		element.addEventListener(type, callback, false);
	};
	this.unlisten = function(element, type) {
		var listener;
		for (var i = 0; i < listeners.length; i++) {
			listener = listeners[i];
			if (listener && listener[0] == element && listener[1] == type) {
				listener[0].removeEventListener(listener[1], listener[2], false);
				listeners[i] = null;
			}
		}
	};
	this.dispose = function() {
		var listener;
		for (var i = 0; i < listeners.length; i++) {
			listener = listeners[i];
			if (listener) {
				listener[0].removeEventListener(listener[1], listener[2], false);
			}
		}
		listeners = null;
	};
}
function Initialization() {
	this.inherits = function(list) {
		var children, parent, child, initials;
		for (var k = 0; k < list.length; k++) {
			parent = list[k];
			children = list[++k];
			for (var i = 0; i < children.length; i++) {
				child = children[i];
				if (parent != Core) {
					if (!child.prototype.inheritedSuperClasses) {
						child.prototype.inheritedSuperClasses = [];
					}
					child.prototype.inheritedSuperClasses.push(parent);
				}
				for (var method in parent.prototype) {
					if (!child.prototype[method] && isMethodToInherit(method)) {
						child.prototype[method] = parent.prototype[method];
					}
				}
			}
		}
	};
	this.initiate = function(props) {
		var initials = null;
		var initiateParental = function(superClasses, object) {
			for (var i = 0; i < superClasses.length; i++) {
				if (isFunction(superClasses[i].prototype.initiate)) {
					superClasses[i].prototype.initiate.call(object);
				}
				if (isFunction(superClasses[i].prototype.getInitials)) {
					var parentInitials = superClasses[i].prototype.getInitials();
					if (isObject(parentInitials)) {
						initials = extendInitials(initials, parentInitials);
					}
				}
				if (isArray(superClasses[i].prototype.inheritedSuperClasses)) {
					initiateParental(superClasses[i].prototype.inheritedSuperClasses, object);
				}
			}
		};
		if (isArray(this.inheritedSuperClasses)) {
			initiateParental(this.inheritedSuperClasses, this);
		}
		this.props = props || {};
		if (isFunction(this.constructor.prototype.initiate)) {
			this.constructor.prototype.initiate.call(this);
		}
		if (isFunction(this.constructor.prototype.getInitials)) {
			var ownInitials = this.constructor.prototype.getInitials();
			if (isNull(initials)) {
				initials = ownInitials;
			} else if (isObject(ownInitials)) {
				initials = extendInitials(initials, ownInitials);
			}
		}
		this.initials = initials;
		if (props && isString(props['cmpid'])) {
			this.setId(props['cmpid']);
		}
	};
	var isMethodToInherit = function(method) {
		return method != __I && method != __GI;
	};
	var extendInitials = function(initials1, initials2) {
		if (isNull(initials1)) {
			initials1 = initials2;
		} else {
			for (var k in initials2) {
				if (isUndefined(initials1[k])) {
					initials1[k] = initials2[k];
				} else {
					Objects.merge(initials1[k], initials2[k]);
				}
			}
		}
		return initials1;
	};
}
Initialization = new Initialization();
function Router() {
	var routes = __ROUTES;
	var properRoutes = {};
	var isHashRouter = !!__HASHROUTER;
	var defaultRoute = __DEFAULTROUTE;
	var indexRoute = __INDEXROUTE;
	var errorRoutes = __ERRORROUTES;
	var handler, bodyElement, menues, currentRoute,
		subscribers, pathParts;
	this.setNavigationHandler = function(handlr) {
		handler = handlr;
	};
	this.init = function() {
		bodyElement = document.querySelector('body');
		initRoutes(routes);
		if (isHashRouter) {
			window.addEventListener('popstate', onNavigate.bind(this));
		}
		onNavigate();
	};
	this.getPathPartAt = function(index) {
		return isArray(pathParts) ? pathParts[index] : '';
	};
	this.redirect = function(viewName, replState) {
		var route;
		var intViewName = ~~viewName;
		if (intViewName == viewName) {
			viewName = intViewName;
		}
		if (isNumber(viewName)) {
			route = getErrorRoute(viewName);
		} else if (isString(viewName)) {
			route = getRouteByName(viewName);
		} else {
			log('redirect view name is invalid', 'redirect', this, {'viewName': viewName});
			return;
		}
		if (!isObject(route)) {
			log('redirect route is invalid', 'redirect', this, {'route': route});
		} else {
			if (replState && !isNumber(viewName)) {
				replaceState(route);
			}
			changeRoute(route, !!replState);
		}
	};
	this.subscribe = function(options, controller) {
		var routeName = currentRoute['name'];
		subscribers = subscribers || [];
		subscribers.push([routeName, options, controller]);
	};
	this.addMenu = function(menu) {
		if (isObject(menu) && isFunction(menu.onNavigate)) {
			menues = menues || [];
			menues.push(menu);
		}
	};
	this.hasMenu = function(menu) {
		return menues.indexOf(menu) > -1;
	};
	this.getCurrentRoute = function() {
		return currentRoute;
	};
	this.getCurrentRouteName = function() {
		if (currentRoute) {
			return currentRoute['name'];
		}
		return null;
	};
	var getRoute = function() {
		var params = window.location.search;
		var path;
		if (isHashRouter) {
			path = window.location.hash;
		} else {
			path = window.location.pathname;
		}
		pathParts = [];
		var properPaths = [];
		path = path.replace(/^[\#\/]+|\/$/g, '').split('/');		
		if (!path[0]) {
			path[0] = indexRoute;
		}
		for (var i = 0; i < path.length; i++) {
			pathParts.push(path[i]);
			var pathName = pathParts.join('/');			
			if (properRoutes[pathName]) {
				properPaths.push(pathName);
			}
		}
		path = properPaths[properPaths.length - 1];
		if (path) {
			return properRoutes[path];
		} else if (defaultRoute && properRoutes[defaultRoute]) {
			return properRoutes[defaultRoute];
		}
		return getErrorRoute(404);
	};
	var initRoutes = function(rts, parents) {
		parents = parents || [];
		var tempParents = Objects.clone(parents);
		var name, path;
		for (var i = 0; i < rts.length; i++) {
			name = rts[i]['name'];
			tempParents.push(name);
			var children = Objects.clone(rts[i]['children']);
			delete rts[i]['children'];
			path = rts[i]['path'] = tempParents.join('/');
			initRouteParams(rts[i]);
			properRoutes[path] = rts[i];
			if (isArray(children)) {
				initRoutes(children, Objects.clone(tempParents));
			}
			tempParents = Objects.clone(parents);
		}
	};
	var initRouteParams = function(route) {
		if (isObject(route['params'])) {
			var dinamicParams = {};
			for (var k in route['params']) {
				if ((/^\$\d+$/).test(route['params'][k])) {
					dinamicParams[k] = route['params'][k].replace(/[^\d]/g, '');
				}
			}
			for (var k in dinamicParams) {
				delete route['params'][k];
			}
			route['dinamicParams'] = dinamicParams;
		}
	};
	var onNavigate = function() {
		var route = getRoute();
		bodyElement.setClass(route['name'] + '-page');
		var accessLevel = route['accessLevel'];
		if (isNumber(accessLevel) && !User.hasAccessLevel(accessLevel)) {
			route = getErrorRoute(401);
		}
		changeRoute(route, true);
	};
	var getRouteByName = function(viewName) {
		for (var k in properRoutes) {
			if (properRoutes[k]['name'] == viewName) {
				return properRoutes[k];
			}
		}
	};
	var getErrorRoute = function(errorCode) {
		if (isFunction(errorRoutes[errorCode])) {
			errorRoutes[errorCode] = {'name': errorCode, 'view': errorRoutes[errorCode], 'error': errorCode};
		}
		return errorRoutes[errorCode];
	};
	var changeRoute = function(route, changeTitle) {
		currentRoute = route;
		if (isFunction(handler)) {
			handler(route, changeTitle);
		} else {
			log('navigation handler is not function', 'changeRoute', this, {'handler': handler});
		}
		if (!isObject(route)) {
			log('route is invalid', 'changeRoute', this, {'route': route});
		}
		informSubscribers();
		informMenues();
	};
	var replaceState = function(route) {
		if (isHashRouter) {
			window.history.replaceState({}, '', '#' + route['path']);
		} else {
			window.location.href = '/' + route['path'];
		}
	};
	var informSubscribers = function() {
		if (isArray(subscribers)) {
			var subscrView, opts, subscriber;
			for (var i = 0; i < subscribers.length; i++) {
				subscrView = subscribers[i][0]
				opts = subscribers[i][1];
				subscriber = subscribers[i][2];
				if (isObject(opts) && subscrView == currentRoute['name']) {
					var routeOptions = {};
					for (var k in opts) {
						routeOptions[k] = this.getPathPartAt(opts[k]);
					}
					subscriber.handleRouteOptionsChange(routeOptions);
				}
			}
		}
	};
	var informMenues = function() {
		if (isArray(menues)) {
			for (var i = 0; i < menues.length; i++) {
				menues[i].onNavigate(currentRoute['name']);
			}
		}
	};
}
function User() {
	var app;
	var loadedItems = 0;
	var attributes = {};
	var loaded = false;
	var loadRequest;
	var saveRequest;
	var initOptions = function() {
		var userOptions = __USEROPTIONS;
		if (isObject(userOptions)) {
			if (userOptions['login'] && isString(userOptions['login'])) {
				loadRequest = new AjaxRequest(userOptions['login'], onLoad.bind(this));
			}
		}
	};
	var loadDictionary = function() {
		Dictionary.load(onLoadDictionary.bind(this));
	};
	this.load = function(application) {
		if (!loaded) {
			initOptions();
			loadDictionary();
			app = application;
			if (loadRequest) {
				loadRequest.execute();
				return;
			}
		}
		onLoad(getDefaultAttributes());
	};
	var onLoad = function(attrs) {
		attributes = attrs;
		loadedItems++;
		onLoadItem();
	};
	var onLoadDictionary = function() {
		loadedItems++;
		onLoadItem();
	};
	var onLoadItem = function() {
		if (loadedItems == 2) {
			loaded = true;
			if (app instanceof Function) {
				app = new app();
				app.run();
			}
		}
	};
	this.hasFullAccess = function() {
		var fullAccess = Objects.get(__USEROPTIONS, 'fullAccess', null);
		var accessLevel = ~~attributes['accessLevel'];
		return !isNumber(fullAccess) || accessLevel >= fullAccess;
	};
	this.hasAccessLevel = function(accessLevel, isEqual) {
		if (!isEqual) {
			return attributes['accessLevel'] >= accessLevel;
		}
		return attributes['accessLevel'] == accessLevel;
	};
	this.hasType = function(userType) {
		return attributes['type'] == userType;
	};
	this.isAuthorized = function() {
		return attributes['accessLevel'] > 0;
	};
	this.getAttribute = function(attributeName) {
		return attributes[attributeName];
	};
	this.setAttribute = function(attributeName, attributeValue, isToSave) {
		var attrs = {};
		attrs[attributeName] = attributeValue;
		this.setAttributes(attrs, isToSave);
	};
	this.setAttributes = function(attrs, isToSave) {
		if (isObject(attrs)) {
			for (var k in attrs) {
				attributes[k] = attrs[k];
			}		
			if (isToSave && saveRequest) {
				saveRequest.execute(attributes);
			}
		}
	};
	var getDefaultAttributes = function() {
		return {
			'type': 'guest',
			'accessLevel': 0
		};
	};
}
function Objects() {
	this.each = function(obj, callback, thisObj) {
		if (isArrayLike(obj)) {
			if (thisObj) callback = callback.bind(thisObj);
			for (var k in obj) if (callback(obj[k], k) == 'break') break;
		}
	};
	this.remove = function(obj, item) {
		if (isArray(obj)) this.removeAt(obj, obj.indexOf(item));
		else if (isObject(obj)) delete obj[obj.getKey(item)];
	};
	this.removeAt = function(arr, idx) {
		if (isArray(arr) && isNumber(idx) && idx >= 0) arr.splice(idx, 1);
	};
	this.equals = function(arr1, arr2) {
		if (typeof arr1 !== typeof arr2) return false;
	    if (isArray(arr1) && isArray(arr2) && arr1.length !== arr2.length) return false;
	    if (isObject(arr1)) {
	        for (var p in arr1) {
	        	if (arr1.hasOwnProperty(p)) {
		            if (isFunction(arr1[p]) && isFunction(arr2[p])) continue;
		            if (isArray(arr1[p]) && isArray(arr2[p]) && arr1[p].length !== arr2[p].length) return false;
		            if (typeof arr1[p] !== typeof arr2[p]) return false;
		            if (isObject(arr1[p]) && isObject(arr2[p])) {
		            	if (!this.equals(arr1[p], arr2[p])) return false; 
		            } else if (arr1[p] !== arr2[p]) {
		            	return false;
		            }
	        	}
	        }
	    } else return arr1 === arr2;
	    return true;		
	};
	this.merge = function() {
		var arrs = arguments;
		if (!isObject(arrs[0])) arrs[0] = {};
		for (var i = 1; i < arrs.length; i++) {
			if (isArrayLike(arrs[i])) {
				for (var k in arrs[i]) arrs[0][k] = arrs[i][k];
			}
		}
		return arrs[0];
	};
	this.clone = function(obj) {
		if (!isArrayLike(obj)) return obj;
		return JSON.parse(JSON.stringify(obj));
	};
	this.get = function(obj, key, defaultValue) {
		return this.has(obj, key) ? obj[key] : defaultValue;
	};
	this.getByIndex = function(obj, idx) {
		if (!isArrayLike(obj)) return;
		if (isArray(obj)) return obj[idx];
		var count = 0;
		for (var k in obj) {
			if (count == idx) return idx[k];
			count++;
		}
	};
	this.has = function(obj, key, value) {
		if (!isArrayLike(obj)) return false;
		var has = !isUndefined(obj[key]);
		if (has && !isUndefined(value)) return obj[key] == value;
		return has;
	};
	this.empty = function(obj) {
		if (!isArrayLike(obj)) return true;
		if (isObject(obj)) {
			for (var k in obj) return false;
			return true;
		}
		return isUndefined(obj[0]);
	};
	this.getKey = function(obj, value) {
		for (var k in obj) if (obj[k] == value) return k;
	};
}
Objects = new Objects();
function getFzName(type) {
	if (type > 4400) return '44 ';
	if (type < 128) return '94 ';
	if (type == 256) return '223 ';
	if (type == 128) return '';
	return '?? ??';
}
function log(message, method, object, opts) {
	window.console.log(method === undefined ? message : new Error(message, method, object, opts));
}
function Error(message, method, object, opts) {
	this.object = object;
	this.method = method;
	this.message = message;
	this.opts = opts;
}
function generateRandomKey() {
	var x = 2147483648, now = +new Date();
	return Math.floor(Math.random() * x).toString(36) + Math.abs(Math.floor(Math.random() * x) ^ now).toString(36);
}
function toCamelCase(str) {
	return String(str).replace(/\-([a-z])/g, function(all, match) {
		return match.toUpperCase();
	});
}
function isComponentLike(a) {
	return isObject(a) && isFunction(a.instanceOf);
}
function isComponent(a) {
	return isComponentLike(a) && a.instanceOf(Component);
}
function isControl(a) {
	return isComponentLike(a) && a.instanceOf(Control);
}
function isObject(a) {
	return !!a && typeof a == 'object' && !isNode(a) && !isArray(a);
}
function isArray(a) {
	return a instanceof Array;
}
function isArrayLike(a) {
	return isArray(a) || isObject(a);
}
function isElement(a) {
	return a instanceof Element;
}
function isNode(a) {
	return a instanceof Node;
}
function isText(a) {
	return a instanceof Text;
}
function isFunction(a) {
	return a instanceof Function;
}
function isBool(a) {
	return typeof a == 'boolean';
}
function isString(a) {
	return typeof a == 'string';
}
function isNumber(a) {
	return typeof a == 'number';
}
function isNumeric(a) {
	return isNumber(a) || (isString(a) && (/^\d+$/).test(a));
}
function isUndefined(a) {
	return a === undefined;
}
function isNull(a) {
	return a === null;
}
function isNone(a) {
	return isUndefined(a) || isNull(a) || a === false || a === 0 || a === '0' || a === '';
}
function stringToNumber(str) {
	return Number(str);
}
function App(props) {
	Initialization.initiate.call(this, props);
};
App.prototype.onClick = function() {
	console.log(this.attachController)
};
App.prototype.onError = function(errorCode) {
	this.getChild('menu').setAppended(false);
};
App.prototype.getTemplateMain = function($,_) {
	return[{'cmp':TopMenu,'p':{'cmpid':'menu'}},{'t':0,'e':[0,$.onClick],'p':{'c':'app-view-container'}}]
};
function Analytics(props) {
	Initialization.initiate.call(this, props);
};
Analytics.prototype.getTemplateMain = function($,_) {
	return[{'t':0,'p':{'c':'view-content'}}]
};
function Error401(props) {
	Initialization.initiate.call(this, props);
};
Error401.prototype.onRendered = function() {
};
Error401.prototype.getTemplateMain = function($,_) {
	return[{'c':{'cmp':AuthForm},'t':0,'p':{'c':'app-auth-form-container'}}]
};
function Error404(props) {
	Initialization.initiate.call(this, props);
};
Error404.prototype.onRendered = function() {
};
Error404.prototype.getTemplateMain = function($,_) {
	return[{'c':[{'c':'404','t':0,'p':{'c':'app-404-title'}},{'c':__T[0],'t':0,'p':{'c':'app-404-text'}}],'t':0,'p':{'c':'app-404-container'}}]
};
function Favorite(props) {
	Initialization.initiate.call(this, props);
};
Favorite.prototype.onRendered = function() {
};
Favorite.prototype.getTemplateMain = function($,_) {
	return[{'t':0,'p':{'c':'view-content'}}]
};
function Main(props) {
	Initialization.initiate.call(this, props);
};
Main.prototype.onRendered = function() {
	this.onResize();
};
Main.prototype.onResize = function() {
	var element = this.findElement('.app-mainpage-content');
	element.setHeight('');
	var height = element.getHeight();
	var bodyHeight = document.body.getHeight();
	var diff = bodyHeight - 100 - height;
	if (diff > 0) {
		element.setHeight(bodyHeight - 100);
	}
};
Main.prototype.getTemplateMain = function($,_) {
	return[{'c':{'c':{'c':[{'c':{'c':[{'c':__[52],'t':0,'p':{'c':'app-mainpage-left-column-title'}},{'cmp':UserInfo},{'c':[__[69],{'cmp':Tooltip,'p':{'args':__V[4]}}],'t':0,'p':{'c':'mainpage-leftcolumn-title bold'}},{'cmp':FavoritesCalendar}],'t':0,'p':{'c':'app-mainpage-left-column-area'}},'t':6,'p':{'c':'app-mainpage-left-column'}},{'c':[{'cmp':TabPanel,'p':{'args':__V[6]}},{'c':[{'c':{'cmp':FilterStatistics,'p':{'args':__V[7]}},'t':0,'p':{'c':'app-mainpage-tab1-content'}},{'c':[{'cmp':FilterSubscriptionOptions},{'cmp':FilterSubscription}],'t':0,'p':{'c':'app-mainpage-tab2-content'}},{'t':0,'p':{'c':'app-mainpage-tab3-content'}}],'t':0,'p':{'c':'app-mainpage-content'}}],'t':6,'p':{'c':'app-mainpage-content-column'}}],'t':5},'t':2,'p':{'c':'app-mainpage-table','cp':'0px','cs':'0px'}},'t':0,'p':{'c':'view-content main-view-content','sc':1}}]
};
Main.prototype.getInitials = function() {
	return {
		'helpers':[{'helper': ResizeHandler,'options': {'callback': this.onResize}}]
	};
};
Main.prototype.getControllersToLoad = function() {
	return [Favorites,Filters];
};
function Search(props) {
	Initialization.initiate.call(this, props);
};
Search.prototype.onRendered = function() {
	this.openInformer();
};
Search.prototype.openInformer = function() {
	var datatable = this.getChildById('datatable');
};
Search.prototype.openFilter = function(filterId) {
};
Search.prototype.onFormExpand = function() {
	this.toggle('expanded');
};
Search.prototype.getTemplateMain = function($,_) {
	return[{'c':[{'cmp':SearchForm,'e':['expand',$.onFormExpand],'p':{'cmpid':'form'}},{'cmp':TendersDataTable,'p':{'cmpid':'datatable'}}],'t':0,'p':{'c':function(){return 'view-content'+($.g('expanded')?' form-expanded':'')},'sc':1},'n':{'c':'expanded'}}]
};
Search.prototype.getInitials = function() {
	return {
		'props':{'expanded': true}
	};
};
Search.prototype.getControllersToLoad = function() {
	return [Filters];
};
function DataTable(props) {
	Initialization.initiate.call(this, props);
};
DataTable.prototype.getTemplateMain = function($,_) {
	return[{'c':{'cmp':DataTableTabPanel},'t':0,'p':{'c':'app-datatable-outer-container'}}]
};
function DataTableTabPanel(props) {
	Initialization.initiate.call(this, props);
};
function DataTableFragmets(props) {
	Initialization.initiate.call(this, props);
};
function DataTableRow(props) {
	Initialization.initiate.call(this, props);
};
DataTableRow.prototype.getTemplateControls = function($,_) {
	return[{'t':0,'p':{'c':'app-datatable-color-mark datatable-control'}},{'c':{'tmp':includeGeneralTemplateCheckbox},'t':0,'p':{'c':'app-datatable-checkbox-container datatable-control'}},{'t':0,'p':{'c':'app-datatable-star datatable-control'}}]
};
DataTableRow.prototype.getTemplateCount = function($,_) {
	return[{'c':_['count'],'t':1,'p':{'c':'app-datatable-standart-row-count'}}]
};
function DataTableStandartRow(props) {
	Initialization.initiate.call(this, props);
};
DataTableStandartRow.prototype.getTemplateMain = function($,_) {
	return[{'c':[!_['nocontrols']?{'tmp':$.getTemplateControls}:'',{'c':[{'c':getFzName(_['type']),'t':0,'p':{'c':'app-datatable-standart-row-top-item'}},{'c':!!_['multiregion']?[{'c':[{'tmp':$.getTemplateCount,'p':{'count':_['multiregion']}},_['regionName']],'t':0,'p':{'c':'app-datatable-standart-row-top-item tooltiped','txt':_['regionnames'],'cap':__[0],'del':'1','cor':'list','pos':'left-top'}}]:_['regionName'],'i':true},{'c':!!_['multicategory']?[{'c':[{'tmp':$.getTemplateCount,'p':{'count':_['multicategory']}},_['subcategory']],'t':0,'p':{'c':'app-datatable-standart-row-top-item tooltiped','txt':_['subcategories'],'cap':__[1],'del':'1','cor':'list','pos':'left-top'}}]:_['subcategory'],'i':true},{'c':_['razm']==' N/A'?{'tmp':includeGeneralTemplateUnavailable,'p':{'tariff':_['isUnavailable'],'width':'66px'}}:_['razm'],'t':0,'p':{'c':'app-datatable-standart-row-top-item'}}],'t':0,'p':{'c':'app-datatable-standart-row-top'}},{'c':_['price'],'t':0,'p':{'c':'app-datatable-standart-row-price'}},{'c':[{'c':!!_['hot']?[{'tmp':$.getTemplateHotMark}]:'','i':true},_['name']],'t':0,'p':{'c':'app-datatable-standart-row-name'}},{'t':0,'p':{'c':'app-datatable-standart-row-bottom'}},{'c':!!_['fragments']?[{'cmp':DataTableFragmets,'p':{'data':_['fragments']}}]:'','i':true}],'t':12,'p':{'h':'#tender/'+_['Id'],'tr':'_blank','c':'app-datatable-row','sc':1,'_id':_['Id']}}]
};
function TendersDataTable(props) {
	Initialization.initiate.call(this, props);
};
function FilterStatistics(props) {
	Initialization.initiate.call(this, props);
};
FilterStatistics.prototype.onRendered = function() {
	this.refresh();
};
FilterStatistics.prototype.onRefreshButtonClick = function() {
	this.each('filters', function(filter) {
		StoreKeeper.remove('filterStat_' + filter['filterId']);
	});
	this.refresh();
};
FilterStatistics.prototype.onFilterClick = function() {
	alert('filter')
};
FilterStatistics.prototype.refresh = function() {
	this.showElement('.app-filter-stat-refresh', false);
	this.currentFilterIndex = 0;
	this.getCountForFilterWithIndex(0);	
};
FilterStatistics.prototype.onLoaded = function(filters) {
	this.set('filters', filters);
};
FilterStatistics.prototype.updateFilterCount = function(data) {
	this.fill(this.findElement('.row' + data['filterId']), data['numbers']);
	this.currentFilterIndex++;
	this.getCountForFilterWithIndex(this.currentFilterIndex);
};
FilterStatistics.prototype.getCountForFilterWithIndex = function(index) {
	var filter = Objects.get(this.get('filters'), index);
	if (isObject(filter)) {
		FiltersStat.load({'filterId': filter['filterId']});
	} else {
		this.showElement('.app-filter-stat-refresh', true);
	}
};
FilterStatistics.prototype.getTemplateMain = function($,_) {
	return[{'c':[{'c':[_['title']?_['title']:'',{'c':__[74],'t':0,'p':{'c':'app-filter-stat-refresh'}}],'t':0,'p':{'c':'app-filter-stat-title'}},{'c':{'c':[{'c':__[75],'t':7},{'c':__[76],'t':7},{'c':__[77],'t':7},{'c':__[78],'t':7},{'c':!!_['extended']?[{'c':__[79],'t':7},{'c':__[80],'t':7}]:'','i':true}],'t':5},'t':2,'p':{'c':'app-filter-stat-head','cp':'0','cs':'0'}},{'c':{'h':function(filter){return[{'c':[{'c':filter['header'],'t':1,'p':{'c':'app-filter-stat-row-name'}},{'c':['+',{'pl':'today','d':'0'}],'t':1},{'c':['+',{'pl':'yesterday','d':'0'}],'t':1},{'c':{'pl':'current','d':'0'},'t':1},{'c':!!_['extended']?[{'c':{'pl':'week','d':'0'},'t':1},{'c':{'pl':'month','d':'0'},'t':1}]:'','i':true}],'t':0,'p':{'c':'app-filter-stat-row row'+filter['filterId']}}]},'p':$.g('filters'),'f':'filters'},'t':0,'p':{'c':'app-filter-stat-content'}}],'t':0,'p':{'c':'app-filter-stat '+_['className'],'sc':1}}]
};
FilterStatistics.prototype.getInitials = function() {
	return {
		'loader':{'controller': Filters,'async': false},
		'controllers':[{'controller': FiltersStat,'on': {'load': this.updateFilterCount}}],
		'helpers':[{helper: ClickHandler,options: {'app-filter-stat-refresh': this.onRefreshButtonClick,'app-filter-stat-row-name': this.onFilterClick}}]
	};
};
function SearchForm(props) {
	Initialization.initiate.call(this, props);
};
SearchForm.prototype.toggleExpand = function() {
	this.dispatchEvent('expand');
};
SearchForm.prototype.getTemplateMain = function($,_) {
	return[{'c':[{'c':_['title'],'t':0,'p':{'c':'app-search-form-title'}},{'t':0,'e':[0,$.toggleExpand],'p':{'c':'app-search-form-close-side'}},{'t':0,'e':[0,$.toggleExpand],'p':{'c':'app-search-form-close'}},{'cmp':TenderSearchForm}],'t':0,'p':{'c':'app-search-form','sc':1}}]
};
SearchForm.prototype.getInitials = function() {
	return {
		'args':{'title': __[4]}
	};
};
function SearchFormButton(props) {
	Initialization.initiate.call(this, props);
};
SearchFormButton.prototype.getTemplateMain = function($,_) {
	return[{'c':{'tmp':$.getTemplateContent},'t':0,'p':{'c':'app-search-form-button '+_['className']}}]
};
SearchFormButton.prototype.getTemplateContent = function($,_) {
	return null
};
function SearchFormPanel(props) {
	Initialization.initiate.call(this, props);
};
SearchFormPanel.prototype.show = function() {
	this.addClass('shown');
	Popuper.watch(this);
};
SearchFormPanel.prototype.hide = function() {
	this.addClass('shown', false);
};
SearchFormPanel.prototype.getTemplateMain = function($,_) {
	return[{'c':[{'t':0,'e':[0,$.hide],'p':{'c':'app-search-form-panel-close'}},{'c':_['title'],'t':0,'p':{'c':'app-search-form-panel-title'}},{'tmp':$.getTemplateContent}],'t':0,'p':{'c':'app-search-form-panel '+_['className'],'sc':1}}]
};
SearchFormPanel.prototype.getTemplateContent = function($,_) {
	return null
};
function SearchFormPanelButton(props) {
	Initialization.initiate.call(this, props);
};
SearchFormPanelButton.prototype.onClick = function() {
	this.get('panel').show();
};
SearchFormPanelButton.prototype.getTemplateMain = function($,_) {
	return[{'c':{'tmp':$.getTemplateContent},'t':0,'e':[0,$.onClick],'p':{'c':'app-search-form-button '+_['className']}}]
};
function KeywordsButton(props) {
	Initialization.initiate.call(this, props);
};
KeywordsButton.prototype.getTemplateContent = function($,_) {
	return[{'c':__[13],'t':0}]
};
KeywordsButton.prototype.getInitials = function() {
	return {
		'args':{'className': 'search-keywords'}
	};
};
function KeywordsPanel(props) {
	Initialization.initiate.call(this, props);
};
KeywordsPanel.prototype.getTemplateContent = function($,_) {
	return[{'cmp':KeywordsControl}]
};
KeywordsPanel.prototype.getInitials = function() {
	return {
		'args':{'className': 'keywords-panel','title': __[13]}
	};
};
function TenderSearchForm(props) {
	Initialization.initiate.call(this, props);
};
TenderSearchForm.prototype.onResetButtonClick = function(e) {
	var button = e.target.getAncestor('.app-search-form-reset');
	button.addClass('active');
	this.delay(function() {
		button.removeClass('active');
	}, 2500);
};
TenderSearchForm.prototype.onResetConfirmed = function() {
};
TenderSearchForm.prototype.getTemplateMain = function($,_) {
	return[{'cmp':KeywordsPanel,'p':{'cmpid':'keywordsPanel'}},{'c':[{'c':__[10],'t':0,'e':[0,$.onResetButtonClick],'p':{'c':'hover-label'}},{'c':[__[11],' ',{'c':__[12],'t':40,'p':{'c':'confirm-reset-filter'}}],'t':0,'e':[0,$.onResetConfirmed],'p':{'c':'confirm-label'}}],'t':0,'p':{'c':'app-search-form-reset'}},{'c':[{'cmp':SearchFormFilters},{'c':{'cmp':KeywordsButton,'w':['panel','keywordsPanel']},'t':0,'p':{'c':'app-tender-search-form-content'}}],'t':0,'p':{'c':'app-tender-search-form','sc':1}}]
};
function SearchFormCreateFilterMenu(props) {
	Initialization.initiate.call(this, props);
};
SearchFormCreateFilterMenu.prototype.onCreateButtonClick = function() {
	alert('create filter')
};
SearchFormCreateFilterMenu.prototype.onWizardButtonClick = function() {
	alert('create filter with wizard')	
};
SearchFormCreateFilterMenu.prototype.getInitials = function() {
	return {
		'args':{'className': 'create-filters-menu'},
		'props':{'buttons': [{'name': __[5],'handler': this.onCreateButtonClick},{'name': __[6],'handler': this.onWizardButtonClick}]}
	};
};
function SearchFormFilterMenu(props) {
	Initialization.initiate.call(this, props);
};
SearchFormFilterMenu.prototype.onLoadFilters = function(filters) {
	this.renderButtons(filters);
};
SearchFormFilterMenu.prototype.onCheckboxChange = function(e) {
	Filters.doAction('set', {'filterId': e.value, 'param': 'isAutoOpen', 'value': e.checked});
};
SearchFormFilterMenu.prototype.getButtonData = function(item) {
	return {
		'value': item['filterId'],
		'name': item['header'],
		'isAutoOpen': item['isAutoOpen']
	};
};
SearchFormFilterMenu.prototype.handleClick = function(value, button) {
	Globals.getView('search').openFilter(value);
};
SearchFormFilterMenu.prototype.getTemplateContent = function($,_) {
	return[{'t':0,'p':{'c':'app-ui-checkbox'+(_['item']['isAutoOpen']?' checked':''),'_value':_['item']['value']}}]
};
SearchFormFilterMenu.prototype.getInitials = function() {
	return {
		'args':{'className': 'filters-menu','maxHeight': 400},
		'controllers':[{'controller': Filters,'on': {'load': this.onLoadFilters}}],
		'helpers':[{'helper': CheckboxHandler,'options': {'callback': this.onCheckboxChange,'intValue': true}}]
	};
};
function SearchFormFilters(props) {
	Initialization.initiate.call(this, props);
};
SearchFormFilters.prototype.onLoadFilters = function(filters) {
	this.set('quantity', filters.length);
};
SearchFormFilters.prototype.onSaveFilterClick = function() {
	Dialoger.show(FilterEdit, {'filterId': Globals.get('filterId')});
};
SearchFormFilters.prototype.getTemplateMain = function($,_) {
	return[{'c':[{'c':[{'c':__[7],'t':1},{'cmp':SearchFormCreateFilterMenu}],'t':0,'p':{'c':'app-search-form-filters-create-button'}},{'c':[{'c':__[8],'t':0,'p':{'c':'app-search-form-filters-button-inner'}},{'c':[{'c':{'pr':'quantity','p':$.g('quantity')},'t':42,'p':{'c':'app-search-form-filters-button-quantity'}},{'t':0,'p':{'c':'app-search-form-filters-button-plus'}}],'t':0,'p':{'c':'app-search-form-filters-button-side'}},{'cmp':SearchFormFilterMenu}],'t':0,'p':{'c':function(){return 'app-search-form-filters-button'+(!$.g('quantity')?' with-plus':'')}},'n':{'c':'quantity'}},{'c':{'pr':'filterName','p':$.g('filterName')},'t':0,'e':[0,$.onSaveFilterClick],'p':{'c':'app-search-form-filter-name'}},{'c':__[9],'t':0,'e':[0,$.onSaveFilterClick],'p':{'c':'app-search-form-filter-save-button'}}],'t':0,'p':{'c':'app-search-form-filters','sc':1}}]
};
SearchFormFilters.prototype.getInitials = function() {
	return {
		'controllers':[{'controller': Filters,'on': {'load': this.onLoadFilters}}],
		'props':{'filterName': 'Master'}
	};
};
function Calendar(props) {
	Initialization.initiate.call(this, props);
};
Calendar.prototype.onRendered = function() {
	this.reset();
};
Calendar.prototype.redraw = function() {
	var day       = this.isCurrentMonth() ? Dates.getDay() : 0,
		month     = this.month,
		year      = this.year,
		curDays   = Dates.getDays(month, year),
		prevMonth = month - 1 >= 0 ? month - 1 : 11,
		prevYear  = prevMonth < 12 ? year : year - 1,
		prevDays  = Dates.getDays(prevMonth, prevYear),
		firstDay  = Dates.getWeekDay(1, month, year),
		firstCell = firstDay > 0 ? firstDay - 1 : 6,
		count     = 1,
		lastCell  = 0, 
		days      = [];
	for (var i = 0; i < firstCell; i++) {
		days.push({num: prevDays - i, another: true});
	}
	days = days.reverse();
	for (var i = firstCell; i < curDays + firstCell; i++) {
		days.push({num: count, current: count == day, marked: this.isMarked(count, month, year)});
		lastCell = i;
		count++;
	}
	var len = days.length;
	var more =  len <= 35 ? 35 - len : 42 - len;		
	for (var i = 1; i <= more; i++) {
		days.push({num: i, another: true});
	}
	this.set({'year':year,'month':Dates.getMonthName(month),'days':days});
};
Calendar.prototype.isCurrentMonth = function() {
	return this.month == Dates.getMonth() && this.year == Dates.getYear();
};
Calendar.prototype.reset = function() {
	this.month = Dates.getMonth();
	this.year = Dates.getYear();
	this.redraw();
};
Calendar.prototype.isMarked = function() {
	return false;
};
Calendar.prototype.onPrevClick = function() {
	this.changeMonth(-1);
};
Calendar.prototype.onNextClick = function() {
	this.changeMonth(1);	
};
Calendar.prototype.changeMonth = function(value) {
	this.month += value;
	if (this.month == 12) {
		this.month = 0;
		this.year++;
	} else if (this.month == -1) {
		this.month = 11;
		this.year--;
	}
	this.redraw();
};
Calendar.prototype.getTemplateMain = function($,_) {
	return[{'c':[{'c':[{'t':0,'e':[0,$.onPrevClick],'p':{'c':'app-calendar-prev'}},{'c':[{'pr':'month','p':$.g('month')},{'c':{'pr':'year','p':$.g('year')},'t':1,'p':{'c':'app-calendar-year'}}],'t':0,'p':{'c':'app-calendar-month'}},{'t':0,'e':[0,$.onNextClick],'p':{'c':'app-calendar-next'}}],'t':0,'p':{'c':'app-calendar-header'}},{'c':[{'c':[{'c':__[43],'t':1},{'c':__[44],'t':1},{'c':__[45],'t':1},{'c':__[46],'t':1},{'c':__[47],'t':1},{'c':__[48],'t':1},{'c':__[49],'t':1}],'t':0,'p':{'c':'app-calendar-day-names'}},{'c':{'h':function(day){return[{'c':day.num,'t':1,'p':{'c':(day.another?' another':'')+' '+(day.current?' current':'')+' '+(day.marked?' marked':'')}}]},'p':$.g('days'),'f':'days'},'t':0,'p':{'c':'app-calendar-days'}}],'t':0,'p':{'c':'app-calendar-content'}}],'t':0,'p':{'c':'app-calendar'}}]
};
function FavoritesCalendar(props) {
	Initialization.initiate.call(this, props);
};
FavoritesCalendar.prototype.onRendered = function() {
	this.month = Dates.getMonth();
	this.year = Dates.getYear();
};
FavoritesCalendar.prototype.isMarked = function(d, m, y) {
	return Objects.has(this.tenderByDates, d + '.' + (m + 1) + '.' + y);
};
FavoritesCalendar.prototype.onLoadFavorites = function(data) {
	var timestamp;
	this.tenderByDates = {};
	for (var i = 0; i < data.length; i++) {
		if (data[i]['phase_'] == 1) {
			timestamp = data[i]['finishdocdate'].replace(/\.(\d+)$/, ".20$1").replace(/0(?=\d\.)/g, '');
			this.tenderByDates[timestamp] = this.tenderByDates[timestamp] || [];
			this.tenderByDates[timestamp].push(data[i]);
		}
	}
	this.redraw();
};
FavoritesCalendar.prototype.onMarkedDayClick = function(e) {
	var timestamp = e.target.innerHTML + '.' + (this.month + 1) + '.' + this.year;
	if (isArray(this.tenderByDates[timestamp])) {
		Dialoger.show(CalendarFavorites, {
			'title': __[16] + ' ' + Dates.getFormattedDate(timestamp, __[17]),
			'tenders': this.tenderByDates[timestamp]
		});
	}
};
FavoritesCalendar.prototype.getInitials = function() {
	return {
		'controllers':[{'controller': Favorites,'on': {'load': this.onLoadFavorites}}],
		'helpers':[{'helper': ClickHandler,'options': {'marked': this.onMarkedDayClick}}]
	};
};
function Dialog(props) {
	Initialization.initiate.call(this, props);
};
Dialog.prototype.show = function() {
	this.set('shown',true);
	this.reposition();	
	this.onShow();
};
Dialog.prototype.reposition = function() {
	var element = this.getElement();
	var rect = element.getRect();	
	this.set({'marginTop':Math.round(rect.height / -2) + 'px','marginLeft':Math.round(rect.width / -2) + 'px'});
};
Dialog.prototype.hide = function() {
	this.set('shown',false);
	this.onHide();
};
Dialog.prototype.expand = function() {
	this.toggle('expanded');
};
Dialog.prototype.onShow = function() {
};
Dialog.prototype.onHide = function() {
};
Dialog.prototype.getTemplateMain = function($,_) {
	return[{'t':0,'e':[0,$.hide],'p':{'c':function(){return 'app-dialog-mask'+($.g('shown')?' shown':'')}},'n':{'c':'shown'}},{'c':[{'c':!!_['closable']?[{'t':0,'e':[0,$.hide],'p':{'c':'app-dialog-close'}}]:'','i':true},{'c':!!_['expandable']?[{'t':0,'e':[0,$.expand],'p':{'c':'app-dialog-expand'}}]:'','i':true},{'c':{'pr':'title','p':$.g('title')},'t':0,'p':{'c':'app-dialog-title'}},{'c':{'tmp':$.getTemplateContent},'t':0,'p':{'c':'app-dialog-content','st':function(){return ($.g('height')?' max-height:'+$.g('height')+' px;':'')}},'n':{'st':'height'}}],'t':0,'p':{'c':function(){return 'app-dialog'+($.g('expanded')?' expanded':'')+($.g('shown')?' shown':'')},'sc':1,'st':function(){return 'width:'+$.g('width')+'px;margin-left:'+$.g('marginLeft')+';margin-top:'+$.g('marginTop')+';'}},'n':{'c':['expanded','shown'],'st':['width','marginLeft','marginTop']}}]
};
Dialog.prototype.getTemplateContent = function($,_) {
	return null
};
Dialog.prototype.getInitials = function() {
	return {
		'args':{'closable': true},
		'followers':{'width': this.reposition,height: this.reposition},
		'props':{'width': 600}
	};
};
function Form(props) {
	Initialization.initiate.call(this, props);
};
Form.prototype.initiate = function() {
	this.controls = {};
};
Form.prototype.onSubmit = function() {
	if (this.isValid()) {
		if (this.formElement) {
			this.setFormKey();
			this.formElement.submit();
		} else if (this.request) {
			this.request.send(this.options['method'] || 'POST', this.getData());
		}
	}
};
Form.prototype.setFormKey = function() {
	this.formKey = generateRandomKey();
	window[this.formKey] = this;
	if (!isElement(this.keyInput)) {
		this.keyInput = document.createElement('input');
		this.keyInput.setAttribute('name', 'formKey');
		this.keyInput.setAttribute('type', 'hidden');
		this.keyInput.value = this.formKey;
		this.getElement().appendChild(this.keyInput);
	}
};
Form.prototype.isValid = function() {
	return true;
};
Form.prototype.getData = function() {
	var data = {};
	for (var k in this.controls) {
		data[k] = this.controls[k].getValue();
	}
	return data;
};
Form.prototype.handleResponse = function(data) {
	if (isString(data)) {
		try {
			data = JSON.parse(data);
		} catch (e) {
			log('incorrect form response', 'handleResponse', this, {'data': data});
		}
	}
	if (isObject(data) && data['success']) {
		this.onSuccess(data);
	} else {
		this.onFailure(data);
	}
	if (isString(this.formKey)) {
		this.formKey = null;
		delete window[this.formKey];
	}
};
Form.prototype.onSuccess = function(data) {
};
Form.prototype.onFailure = function(data) {
	var error = isObject(data) && isString(data['error']) ? data['error'] : '';
	this.log(error, 'onFailure', data);
};
Form.prototype.getControl = function(name) {
	return this.controls[name];
};
Form.prototype.getCotrolAt = function(index) {
	return Objects.getByIndex(this.controls, index);
};
Form.prototype.setControlValue = function(name, value) {
	if (isString(name)) {
		var control = this.getControl(name);
		if (control) {
			control.setValue(value);
		}
	}
};
Form.prototype.enableControl = function(name, isEnabled) {
	if (isString(name)) {
		var control = this.getControl(name);
		if (control) {
			control.setEnabled(isEnabled);
		}
	}
};
Form.prototype.disposeInternal = function() {
	this.options = null;
	this.controls = null;
	this.request = null;
	this.formElement = null;
};
Form.prototype.getTemplateMain = function($,_) {
	return[{'c':[{'tmp':$.getTemplateContent},{'h':function(control){return[{'cmp':FormField,'p':{'args':control}}]},'p':_['controls']},{'c':!!_['submit']?[{'cmp':Submit,'p':{'props':_['submit']}}]:'','i':true}],'t':13,'e':[23,$.onSubmit],'p':{'c':'app-form-controls','m':_['method'],'a':_['action']}}]
};
Form.prototype.getTemplateContent = function($,_) {
	return null
};
function FormField(props) {
	Initialization.initiate.call(this, props);
};
FormField.prototype.getValue = function() {
	return this.getCotrolAt(0).getValue();
};
FormField.prototype.getTemplateMain = function($,_) {
	return[{'c':[{'c':!!_['caption']?[{'c':_['caption'],'t':0,'p':{'c':'app-input-caption'}}]:'','i':true},{'cmp':_['controlClass'],'nm':_['controlProps']['name'],'p':{'props':_['controlProps']}}],'t':0,'p':{'c':'app-input-container '+_['class'],'sc':1}}]
};
function PopupMenu(props) {
	Initialization.initiate.call(this, props);
};
PopupMenu.prototype.onRendered = function() {
	var element = this.getElement();
	this.button = element.parentNode;
	this.addListener(this.button, 'click', this.onShowButtonClick);
};
PopupMenu.prototype.onClick = function(e) {
	var target = e.getTarget('.app-popup-menu-button');
	if (!isNull(target)) {
		var idx = target.getData('index');
		var value = target.getData('value');
		var buttons = this.get('buttons');
		if (isArray(buttons) && isObject(buttons[idx]) && isFunction(buttons[idx]['handler'])) {
			buttons[idx]['handler'].call(this, e);
			return;
		}
		this.handleClick(value, target);
	}
};
PopupMenu.prototype.onShowButtonClick = function() {
	this.onBeforeShow();
	this.show();
};
PopupMenu.prototype.handleClick = function(value, button) {
};
PopupMenu.prototype.onBeforeShow = function() {
};
PopupMenu.prototype.show = function() {
	var innerElement = this.findElement('.app-popup-menu-inner-container');
	var rect = innerElement.getRect();
	var height = Math.min(rect.height, Objects.get(this.options, 'maxHeight', 400));
	this.setStyle({'max-height': height + 'px', 'height': height + 'px'});
    this.button.addClass('active');
    Popuper.watch(this);
};
PopupMenu.prototype.hide = function() {
	this.setStyle({'max-height': '0', 'height': '0'});
	this.button.removeClass('active');
};
PopupMenu.prototype.renderButtons = function(items) {
	var buttons = [];
	for (var i = 0; i < items.length; i++) {	
		buttons.push(this.getButtonData(items[i]));
	}
	this.set('buttons',buttons);
};
PopupMenu.prototype.getButtonData = function(item) {
	return {
		'value': item['value'],
		'name': item['name']
	};
};
PopupMenu.prototype.getTemplateMain = function($,_) {
	return[{'c':{'c':{'h':function(button,idx){return[{'c':[button['name'],{'tmp':$.getTemplateContent,'p':{'item':button}}],'t':0,'p':{'c':'app-popup-menu-button','_value':button['value'],'_index':idx}}]},'p':$.g('buttons'),'f':'buttons'},'t':0,'e':[0,$.onClick],'p':{'c':'app-popup-menu-inner-container','st':(_['maxHeight']?' max-height:'+_['maxHeight']+' px;':'')}},'t':0,'p':{'c':'app-popup-menu-outer-container '+_['className'],'sc':1}}]
};
PopupMenu.prototype.getTemplateContent = function($,_) {
	return null
};
function Submit(props) {
	Initialization.initiate.call(this, props);
};
Submit.prototype.onSubmit = function() {
	this.dispatchEvent('submit');
};
Submit.prototype.getTemplateMain = function($,_) {
	return[{'c':{'c':{'pr':'value','p':$.g('value')},'t':0,'e':[0,$.onSubmit],'p':{'c':function(){return $.g('class')}},'n':{'c':'class'}},'t':0,'p':{'c':'app-submit-container'}}]
};
function TabPanel(props) {
	Initialization.initiate.call(this, props);
};
TabPanel.prototype.initiate = function() {
	this.margin = 4;
};
TabPanel.prototype.onRendered = function() {
	this.doOnParentReady(this.onParentReady);
	this.redraw();
};
TabPanel.prototype.onParentReady = function() {
	if (isArray(this.args['tabs'])) {
		for (var i = 0; i < this.args['tabs'].length; i++) {
			this.activateTab(i, !!this.args['tabs'][i]['active']);
		}
	}
};
TabPanel.prototype.redraw = function() {
	this.hiddenTabs = [];
	var tabPanelWidth = this.getElement().getWidth();
	var controlWidth = this.getControlsWidth();
	var tabs = this.findElements('.app-tab');
	var totalWidth = 0, buttonWidth;
	for (var i = 0; i < tabs.length; i++) {
		tabs[i].toggleClass('first', i == 0);
		buttonWidth = tabs[i].getWidth();
		if (totalWidth + controlWidth + buttonWidth + this.margin > tabPanelWidth) {
			tabs[i].show(false);
			this.hiddenTabs.push(i);
		} else {
			tabs[i].style.left = totalWidth + 'px';
			totalWidth += buttonWidth + this.margin;
		}
	}
	this.set('count',this.hiddenTabs.length);
};
TabPanel.prototype.getControlsWidth = function() {
	var width = 0;
	var restButton = this.findElement('.app-tab-rest');
	if (restButton) width += restButton.getWidth() + this.margin;
	var plusButton = this.findElement('.app-tab-plus');
	if (plusButton) width += plusButton.getWidth() + this.margin;
	return width;
};
TabPanel.prototype.onRestTabClick = function() {
};
TabPanel.prototype.onTabClick = function(e, target) {
	if (isNumeric(this.activeTab)) this.activateTab(this.activeTab, false);
	this.activateTab(target.getData('index'), true);
};
TabPanel.prototype.activateTab = function(tabIndex, isShown) {
	var container = this.findElement('.' + Objects.get(this.getTabParamsByIndex(tabIndex), 'container'), this.getScopeElement());
	if (container) container.show(isShown);
	if (isShown) this.activeTab = tabIndex;
	this.getTab(tabIndex).toggleClass('active', isShown);
};
TabPanel.prototype.getTab = function(tabIndex) {
	return this.findElements('.app-content-tab')[tabIndex];
};
TabPanel.prototype.getScopeElement = function() {
	if (!this.scopeElement && isString(this.args['scope'])) this.scopeElement = this.findElementWithinParent('.' + this.args['scope']) || document.body;
	return this.scopeElement;
};
TabPanel.prototype.getTabParamsByIndex = function(tabIndex) {
	return this.args['tabs'][tabIndex];
};
TabPanel.prototype.getTemplateMain = function($,_) {
	return[{'c':[{'h':function(tab,idx){return[{'c':tab['title'],'t':0,'p':{'c':'app-tab app-content-tab','_index':idx}}]},'p':_['tabs']},{'c':!!isObject(_['rest'])?[{'c':[_['rest']['title']||__[51],{'c':!!_['rest']['showCount']?[' (',{'pr':'count','p':$.g('count')},')']:'','i':true}],'t':0,'p':{'c':function(){return 'app-tab app-tab-rest'+($.g('count')?' shown':'')}},'n':{'c':'count'}}]:'','i':true}],'t':0,'p':{'c':'app-tab-panel','sc':1}}]
};
TabPanel.prototype.getInitials = function() {
	return {
		'helpers':[{'helper': ClickHandler,'options': {'app-tab-rest': this.onRestTabClick,'app-tab': this.onTabClick}}]
	};
};
function Tooltip(props) {
	Initialization.initiate.call(this, props);
};
Tooltip.prototype.getTemplateMain = function($,_) {
	return[{'t':0,'p':{'c':'tooltiped app-tooltip '+_['className'],'txt':_['txt'],'key':_['key'],'cls':_['cls'],'cap':_['caption']}}]
};
Tooltip.prototype.getInitials = function() {
	return {
		'args':{'className': ''}
	};
};
function TooltipPopup(props) {
	Initialization.initiate.call(this, props);
};
TooltipPopup.prototype.correctAndSetText = function(text, changedProps) {
	var corrector = changedProps['corrector'];
	if (corrector == 'list') {
		var textParts = text.split('|');
		if (textParts[1]) {
			var temp = [];
			for (var i = 0; i < textParts.length; i++) {
				textPart = textParts[i].split('^');
				textPart = textPart[1] || textPart[0];
				if (textPart.charAt(0) == __[3]) textPart = __[2];
				temp.push(textPart);
			}
			text = temp.removeDuplicates();
		}
	}
	return text;
};
TooltipPopup.prototype.getTemplateMain = function($,_) {
	return[{'c':[{'c':{'pr':'caption','p':$.g('caption')},'t':0,'p':{'c':'app-tooltip-popup-caption'}},{'c':{'c':function(){return[[{'h':function(item){return[{'c':item,'t':0,'p':{'c':'app-tooltip-list-item'}}]},'p':$.g('text'),'f':'text'}]]},'sw':$.g('corrector'),'s':['list'],'d':[{'pr':'text','p':$.g('text')}],'p':'corrector'},'t':0,'p':{'c':'app-tooltip-popup-text'}}],'t':0,'p':{'c':function(){return 'app-tooltip-popup '+$.g('className')+($.g('shown')?' shown':'')},'st':function(){return 'left:'+$.g('left')+'px;top:'+$.g('top')+'px;'},'sc':1},'n':{'c':['className','shown'],'st':['left','top']}}]
};
TooltipPopup.prototype.getInitials = function() {
	return {
		'correctors':{'text': this.correctAndSetText}
	};
};
function FilterSubscription(props) {
	Initialization.initiate.call(this, props);
};
FilterSubscription.prototype.onLoaded = function(filters) {
	this.set('filters',filters);
	this.set({'total':this.getTotalCount(),'subscribed':this.getSubscribedCount()});
};
FilterSubscription.prototype.getTotalCount = function() {
	return Decliner.getCount('filter', this.get('filters'));
};
FilterSubscription.prototype.getSubscribedCount = function() {
	var subscribedCount = 0;
	this.each('filters', function(filter) {
		if (filter['isSubs'] == 1) subscribedCount++;
	});
	return Decliner.getCount('subscr', subscribedCount);
};
FilterSubscription.prototype.onFreqChange = function(e) {
};
FilterSubscription.prototype.onSubscribeButtonClick = function(e, target) {
	var filterId = e.getTargetData('.app-subscription-filter-row', 'filterId');
	if (filterId) {
		Filters.doAction('subscribe', {
			'filterId': filterId,
			'value': target.hasClass('subscribed') ? '0' : '1'
		});
	}
};
FilterSubscription.prototype.getTemplateMain = function($,_) {
	return[{'c':[{'c':[__[85],' ',{'c':__[86],'t':20}],'t':0,'p':{'c':'app-subscription-title'}},{'c':[{'c':{'pr':'total','p':$.g('total')},'t':0,'p':{'c':'app-subscription-head-total'}},{'c':{'pr':'subscribed','p':$.g('subscribed')},'t':0,'p':{'c':'app-subscription-head-subscribed'}}],'t':0,'p':{'c':'app-subscription-head'}},{'c':[{'c':{'c':[{'c':__[90],'t':7,'p':{'c':'settings-filter-name'}},{'c':__[91],'t':7,'p':{'c':'settings-filter-freq'}},{'c':__[92],'t':7,'p':{'c':'settings-filter-subscrbttn'}},{'c':__T[1],'t':7,'p':{'c':'settings-filter-delete'}}],'t':5},'t':4},{'c':{'h':function(filter){return[{'c':[{'c':{'c':filter['header'],'t':1,'p':{'c':'settings-filter'}},'t':6},{'c':{'cmp':Select,'nm':'freqSubs','e':[14,$.onFreqChange],'p':{'options':__V[5],'value':filter['freqSubs']}},'t':6},{'c':{'t':0,'p':{'c':'subscr-button '+(filter['isSubs']==1?__[23]+' subscribed':__[25])}},'t':6},{'c':__T[2],'t':6}],'t':5,'p':{'_filterid':filter['filterId'],'c':'app-subscription-filter-row'}}]},'p':$.g('filters'),'f':'filters'},'t':3}],'t':2,'p':{'c':'app-subscription-table','cp':'0px','cs':'0px'}}],'t':0,'p':{'c':'app-subscription','sc':1}}]
};
FilterSubscription.prototype.getInitials = function() {
	return {
		'loader':{'controller': Filters},
		'helpers':[{'helper': ClickHandler,'options': {'subscr-button': this.onSubscribeButtonClick}}]
	};
};
function FilterSubscriptionOptions(props) {
	Initialization.initiate.call(this, props);
};
FilterSubscriptionOptions.prototype.onLoaded = function(data) {
	var options = data['options'];
	this.set({'opt1':options['tenderOfFavorite'],'opt2':options['protocolOfFavorite'],'opt3':options['protocolOfFilter']});
};
FilterSubscriptionOptions.prototype.onCheckboxChange = function(e) {
	var params = {};
	params[e['name']] = e['intChecked'];
	Subscription.doAction('save', params);
};
FilterSubscriptionOptions.prototype.getTemplateMain = function($,_) {
	return[{'c':[{'c':[{'tmp':includeGeneralTemplateCheckbox,'p':{'name':'tenderOfFavorite','checked':$.g('opt1')}},' ',__[81],' ',{'c':__[82],'t':20}],'t':0,'p':{'c':'app-subscription-option'}},{'c':[{'tmp':includeGeneralTemplateCheckbox,'p':{'name':'protocolOfFavorite','checked':$.g('opt2')}},' ',__[81],' ',{'c':__[83],'t':20}],'t':0,'p':{'c':'app-subscription-option'}},{'c':[{'tmp':includeGeneralTemplateCheckbox,'p':{'name':'protocolOfFilter','checked':$.g('opt3')}},' ',__[81],' ',{'c':__[84],'t':20}],'t':0,'p':{'c':'app-subscription-option'}}],'t':0,'p':{'c':'app-subscription-options','sc':1}}]
};
FilterSubscriptionOptions.prototype.getInitials = function() {
	return {
		'loader':{'controller': Subscription},
		'helpers':[{'helper': CheckboxHandler,'options': {'callback': this.onCheckboxChange,'labelClass': 'app-subscription-option'}}]
	};
};
function UserInfo(props) {
	Initialization.initiate.call(this, props);
};
UserInfo.prototype.onLoaded = function(data) {
	if (!User.hasFullAccess()) {
		data['prolongButtonText'] = __[63];
	} else if (data['needToProlong']) {
		data['prolongButtonText'] = __[64];
	}
	this.set(data);
};
UserInfo.prototype.onOrderCallButtonClick = function() {
	Dialoger.show(OrderCall);	
};
UserInfo.prototype.getTemplateMain = function($,_) {
	return[{'c':[{'c':[{'c':[__[53],':'],'t':6},{'c':{'pr':'userName','p':$.g('userName')},'t':6}],'t':5},{'c':[{'c':[__[54],':'],'t':6},{'c':{'pr':'companyName','p':$.g('companyName')},'t':6}],'t':5},{'c':[{'c':[__[55],':'],'t':6},{'c':{'pr':'userEmail','p':$.g('userEmail')},'t':6}],'t':5},{'c':[{'c':[__[56],':'],'t':6},{'c':{'pr':'typeAccess','p':$.g('typeAccess')},'t':6,'p':{'c':'bold'}}],'t':5},{'c':[{'c':[__[57],':'],'t':6},{'c':{'pr':'beginAccessDate','p':$.g('beginAccessDate')},'t':6}],'t':5},{'c':[{'c':[__[58],':'],'t':6},{'c':{'pr':'endAccessDate','p':$.g('endAccessDate')},'t':6,'p':{'c':function(){return ($.g('needToProlong')?' red':'')}},'n':{'c':'needToProlong'}}],'t':5}],'t':2,'p':{'c':'app-mainpage-user-info','cp':'0px','cs':'0px','sc':1}},{'c':function(){return {'c':{'pr':'prolongButtonText','p':$.g('prolongButtonText')},'t':12,'p':{'h':__[62],'tr':'_blank','c':'access standart-button red-button'}}},'p':['prolongButtonText'],'i':function(){return($.g('prolongButtonText'))}},{'c':__[60],'t':12,'p':{'h':__[59],'tr':'_blank','c':'tariffs standart-button white-button'}},{'c':__[61],'t':0,'p':{'c':'mainpage-leftcolumn-title bold'}},{'c':[{'c':{'pr':'managerName','p':$.g('managerName')},'t':0,'p':{'c':'mainpage-manager-name'}},{'c':[{'c':[' ',{'c':__[65],'t':0,'p':{'c':'mainpage-manager-large-phone'}},{'c':__[66],'t':0,'p':{'c':'mainpage-manager-free'}}],'t':0,'p':{'c':'mainpage-free-call'}},{'pr':'managerPhone','p':$.g('managerPhone')},__T[3],{'c':__[67],'t':51}],'t':0,'p':{'c':'mainpage-manager-phone'}},{'c':{'pr':'managerEmail','p':$.g('managerEmail')},'t':0,'p':{'c':'mainpage-manager-email'}}],'t':0,'p':{'c':'mainpage-manager-info'}},{'c':__[68],'t':0,'e':[0,$.onOrderCallButtonClick],'p':{'c':'standart-button green-button'}}]
};
UserInfo.prototype.getInitials = function() {
	return {
		'loader':{'controller': UserInfoLoader,'async': true }
	};
};
function Favorites() {
	Initialization.initiate.call(this);
	this.processInitials();
};
Favorites.prototype.getInitials = function() {
	return {
		'actions':{'load': {'url': CONFIG.favorites.get},'add': {'url': CONFIG.favorites.add},'remove': {'url': CONFIG.favorites.remove}}
	};
};
function Filters() {
	Initialization.initiate.call(this);
	this.processInitials();
};
Filters.prototype.onLoadFilters = function(data) {
};
Filters.prototype.onLoad = function(data) {
};
Filters.prototype.onAdd = function(data) {
};
Filters.prototype.onSubscribe = function() {
	this.load();
};
Filters.prototype.getInitials = function() {
	return {
		'options':{'key': 'filterId','store': false,'storeAs': 'filters','storePeriod': '1day','clone': true},
		'actions':{'load': {'url' : CONFIG.filters.load,'method' : 'GET','callback': this.onLoad},'save': {'url' : CONFIG.filters.save,'method' : 'POST','callback': this.onAdd},'set': {'url' : CONFIG.filters.set,'method': 'POST'},'subscribe': {'url' : CONFIG.filters.subscribe,'method': 'POST','callback': this.onSubscribe}}
	};
};
function FiltersStat() {
	Initialization.initiate.call(this);
	this.processInitials();
};
FiltersStat.prototype.getInitials = function() {
	return {
		'options':{'key': 'filterId','store': true,'storeAs': 'filterStat_$filterId','storePeriod': '4hour'},
		'actions':{'load': {'url': CONFIG.filterStat.load,'method': 'GET'}}
	};
};
function Subscription() {
	Initialization.initiate.call(this);
	this.processInitials();
};
Subscription.prototype.getInitials = function() {
	return {
		'actions':{'load': {'url': CONFIG.settings.subscr,'method': 'GET'},'save': {'url': CONFIG.settings.set,'method': 'GET'}}
	};
};
function UserInfoLoader() {
	Initialization.initiate.call(this);
	this.processInitials();
};
UserInfoLoader.prototype.getInitials = function() {
	return {
		'actions':{'load': {'url' : CONFIG.user.get,'method' : 'GET'}}
	};
};
function CalendarFavorites(props) {
	Initialization.initiate.call(this, props);
};
CalendarFavorites.prototype.getArgs2 = function(data) {
	return data;
};
CalendarFavorites.prototype.getTemplateContent = function($,_) {
	return[{'c':{'h':function(tender){return[{'cmp':DataTableStandartRow,'p':{'args':tender}}]},'p':$.g('tenders'),'f':'tenders'},'t':0,'p':{'c':'simple-datatable calendar-favorites-datatable'}}]
};
CalendarFavorites.prototype.getInitials = function() {
	return {
		'args':{'expandable': true},
		'props':{'width': 1000}
	};
};
function FilterEdit(props) {
	Initialization.initiate.call(this, props);
};
FilterEdit.prototype.initiate = function() {
	this.controller = Filters;
};
FilterEdit.prototype.getInitials = function() {
	return {
		'props':{'title': __[50]}
	};
};
function OrderCall(props) {
	Initialization.initiate.call(this, props);
};
OrderCall.prototype.onSupportButtonClick = function() {
	this.hide();
	Dialoger.show(Support);
};
OrderCall.prototype.onShow = function() {
	var form = this.getChildAt(0);
	var handler = form.validateTime.bind(form);
	this.interval = setInterval(handler, 60000);
	handler();
};
OrderCall.prototype.onHide = function() {
	clearInterval(this.interval);
};
OrderCall.prototype.getTemplateContent = function($,_) {
	return[{'cmp':OrderCallForm},{'c':__[19],'t':0,'e':[0,$.onSupportButtonClick],'p':{'c':'standart-button order-support'}}]
};
OrderCall.prototype.getInitials = function() {
	return {
		'props':{'title': __[18]}
	};
};
function Support(props) {
	Initialization.initiate.call(this, props);
};
Support.prototype.onOrderCallButtonClick = function() {
	this.hide();
	Dialoger.show(OrderCall);
};
Support.prototype.getTemplateContent = function($,_) {
	return[{'cmp':SupportForm},{'c':__[21],'t':0,'e':[0,$.onOrderCallButtonClick],'p':{'c':'standart-button order-support'}}]
};
Support.prototype.getInitials = function() {
	return {
		'props':{'title': __[20]}
	};
};
function AuthForm(props) {
	Initialization.initiate.call(this, props);
};
AuthForm.prototype.onSuccess = function() {
	window.location.reload();
};
AuthForm.prototype.getTemplateContent = function($,_) {
	return[{'c':__T[4],'t':0,'p':{'c':'app-authform-logo'}}]
};
AuthForm.prototype.getInitials = function() {
	return {
		'args':{'action': 'user/login.php','method': 'POST','ajax': true,'container': 'app-authform-inputs','controls': [{'caption': __[27],'controlClass': Input,'controlProps': {'type': 'text','name': 'login','placeholder': __[26]}},{'caption': __[29],'controlClass': Input,'controlProps': {'type': 'password','name': 'password','placeholder': __[28]}}],'submit': {'value': __[30],'class': 'app-submit'}}
	};
};
function OrderCallForm(props) {
	Initialization.initiate.call(this, props);
};
OrderCallForm.prototype.onRendered = function() {
	this.setControlValue('name', User.getAttribute('name'));
	this.setControlValue('phone', User.getAttribute('phone'));
	var email = User.getAttribute('email');
	if (email) {
		this.setControlValue('email', email);
		this.enableControl('email', false);
	}
};
OrderCallForm.prototype.getDateOptions = function() {
	var monthNames = Dictionary.get('monthNames'),
		date  = new Date(),
		year  = date.getFullYear(),
		time  = date.getHours,
		month = date.getMonth() + 1,
		day   = date.getDate(),
		days  = 33 - new Date(year, month - 1, 33).getDate(),
		dates = [], d, m = month, dayInWeek, count = 0, index = 0, txt;
	var prev = 0;
	while (count < 10) {
		d = day + index;
		if (day + index > days) {
			d = d - days;
			m = month + 1;
			if (m > 12) {
				break;
			}
		}
		dayInWeek = new Date(year, m - 1, d).getDay();
		if (dayInWeek == 0 || dayInWeek > 5) {
			index++;
			continue;
		}	
		dayInWeek = Dictionary.get('dayNames')[dayInWeek];
		txt = count > 1 || (!!prev &&prev != d - 1) ? d + ' ' + monthNames[m] + ', ' + dayInWeek : (count == 0 ? __[38] : __[39]) + ', ' + d + ' ' + monthNames[m];
		dates.push({'value': txt, 'title': txt});
		count++;
		index++;
		prev = d;
	}
	date = day + ' ' + monthNames[month];
	return dates;
};
OrderCallForm.prototype.validateTime = function() {
	var dateSelect = this.getControl('date');
	var timeSelect = this.getControl('time');
	var dateValue = dateSelect.getValue();
    var isToday = (new RegExp(__[38])).test(dateValue);
    if (isToday) {
	    var d = new Date();
	    var times = [11, 13, 16];
	    var moscowTime = d.getUTCHours() + 3;
	    var disabledIndexes = [];
	    for (var i = 0; i < times.length; i++) {
	    	if (moscowTime >= times[i]) {
	    		disabledIndexes.push(i);
	    	}
	    }
	    if (disabledIndexes.length == times.length) {
	    	dateSelect.enableOption(0, false);
	    } else {
	    	for (i = 0; i < disabledIndexes.length; i++) {
	    		timeSelect.enableOption(disabledIndexes[i], false);
	    	}
	    }
	} else {
		timeSelect.enableOption(0, true);
		timeSelect.enableOption(1, true);
		timeSelect.enableOption(2, true);
	}
};
OrderCallForm.prototype.getInitials = function() {
	return {
		'args':{'action': CONFIG.orderCall.send,'method': 'POST','container': 'app-order-call','controls': [__V[1],__V[2],__V[3],{'type': 'select','name': 'topic','options': Dictionary.get('orderCallTopics'),'caption': __[34],'class': 'half-width'},{'type': 'select','name': 'date','options': this.getDateOptions(),'caption': __[35],'class': 'half-width'},{'type': 'select','name': 'time','options': Dictionary.get('timeOptions'),'caption': __[36],'class': 'half-width'},{'type': 'textarea','name': 'comment','caption': __[37]}],'submit': {'value': __[68],'class': __[23] + ' send-button'}}
	};
};
function SupportForm(props) {
	Initialization.initiate.call(this, props);
};
SupportForm.prototype.getInitials = function() {
	return {
		'args':{'action': CONFIG.support.send,'controls': [__V[1],__V[2],__V[3],{'type': 'textarea','name': 'comment','caption': __[40]},{'type': 'file','name': 'screenshot','accept': 'image/*','caption': __[41]}],'submit': {'value': __[42],'class': __[23] + ' send-button'}}
	};
};
function KeywordsControl(props) {
	Initialization.initiate.call(this, props);
};
KeywordsControl.prototype.onRendered = function() {
	this.attachControl('nonmorph');
};
KeywordsControl.prototype.getTemplateMain = function($,_) {
	return[{'c':{'cmp':Select,'nm':'nonmorph','p':{'options':__V[0],'className':'frameless'}},'t':0,'p':{'c':'app-keywords-options'}}]
};
function Input(props) {
	Initialization.initiate.call(this, props);
};
Input.prototype.onChange = function() {
};
Input.prototype.getControlValue = function() {
	return this.findElement('input').value;
};
Input.prototype.getTemplateMain = function($,_) {
	return[{'c':[{'c':function(){return {'c':{'pr':'caption','p':$.g('caption')},'t':0,'p':{'c':'app-input-caption'}}},'p':['caption'],'i':function(){return($.g('caption'))}},{'t':14,'e':[18,$.onChange],'p':{'tp':function(){return $.g('type')},'n':function(){return $.g('name')},'p':function(){return $.g('placeholder')},'v':function(){return $.g('value')},'readonly':function(){return ($.g('enabled')?' readonly':'')},'accept':function(){return $.g('accept')}},'n':{'tp':'type','n':'name','p':'placeholder','v':'value','readonly':'enabled','accept':'accept'}}],'t':0,'p':{'c':function(){return 'app-input-container '+$.g('class')},'sc':1},'n':{'c':'class'}}]
};
function Select(props) {
	Initialization.initiate.call(this, props);
};
Select.prototype.onRendered = function() {
	var value = this.get('value');
	var selected;
	if (!isUndefined(value)) {
		selected = this.selectByValue(value);
	}
	if (!selected) {
		this.selectByIndex(0);
	}
};
Select.prototype.selectByValue = function(value) {
	if (this.get('value') == value) return;
	var options = this.get('options');
	if (isArray(options)) {
		for (var i = 0; i < options.length; i++) {
			if (options[i]['value'] == value) {
				this.selectedIndex = i;
				this.set({'value':value,'title':options[i]['title']});
				return true;
			}
		}
	}
	return false;
};
Select.prototype.selectByIndex = function(index) {
	this.selectedIndex = index;
	var options = this.get('options');
	if (isObject(options[index])) {
		if (this.get('value') == options[index]['value']) return;
		this.set({'value':options[index]['value'],'title':options[index]['title']});
	}
};
Select.prototype.enableOption = function(index, isEnabled) {
	var optionsContainer = this.findElement('.app-select-options');
	var optionElement = optionsContainer.getChildAt(index);
	optionElement.toggleClass('disabled', !isEnabled);
	if (index == this.selectedIndex) {
		this.selectByIndex(index == 0 ? index + 1 : 0);
    }
};
Select.prototype.onOptionsClick = function(e) {
	var target = e.getTarget('.app-select-option');
	if (target && !target.hasClass('disabled')) {
		var value = target.getData('value');
		if (this.selectByValue(value)) this.dispatchChange();
		this.hide();
	}
};
Select.prototype.setProperValue = function(value) {
	this.selectByValue(value);
};
Select.prototype.getControlValue = function() {
	return this.findElement('input').value;
};
Select.prototype.onClick = function() {
	this.set('active',true);
	Popuper.watch(this, this.findElement('.app-select'));
};
Select.prototype.hide = function() {
	this.set('active',false);
};
Select.prototype.getTemplateMain = function($,_) {
	return[{'c':[{'c':{'pr':'title','p':$.g('title')},'t':0,'e':[0,$.onClick],'p':{'c':'app-select-value'}},{'c':{'h':function(option){return[{'c':option.title,'t':0,'p':{'c':'app-select-option','_value':option.value}}]},'p':$.g('options'),'f':'options'},'t':0,'e':[0,$.onOptionsClick],'p':{'c':'app-select-options'}},{'t':14,'p':{'tp':'hidden','n':function(){return $.g('name')},'v':function(){return $.g('value')}},'n':{'n':'name','v':'value'}}],'t':0,'p':{'c':function(){return 'app-select'+($.g('className')?' '+$.g('className'):'')+($.g('active')?' active':'')},'sc':1},'n':{'c':{'0':'className','2':'active'}}}]
};
function Textarea(props) {
	Initialization.initiate.call(this, props);
};
Textarea.prototype.onChange = function() {
};
Textarea.prototype.getControlValue = function() {
	return this.findElement('textarea').value;
};
Textarea.prototype.getTemplateMain = function($,_) {
	return[{'c':[{'c':function(){return {'c':{'pr':'caption','p':$.g('caption')},'t':0,'p':{'c':'app-input-caption'}}},'p':['caption'],'i':function(){return($.g('caption'))}},{'c':{'pr':'value','p':$.g('value')},'t':49,'e':[18,$.onChange],'p':{'n':function(){return $.g('name')},'p':function(){return $.g('placeholder')},'readonly':function(){return ($.g('enabled')?' readonly':'')}},'n':{'n':'name','p':'placeholder','readonly':'enabled'}}],'t':0,'p':{'c':function(){return 'app-input-container '+$.g('class')},'sc':1},'n':{'c':'class'}}]
};
function TopMenu(props) {
	Initialization.initiate.call(this, props);
	Router.addMenu(this);
	this.isRouteMenu = true;
};
TopMenu.prototype.getTemplateMain = function($,_) {
	return[{'c':{'c':[{'t':12,'p':{'h':'#main','c':'app-top-menu-logo'}},{'c':__T[5],'t':12,'p':{'h':'#main','r':'main'}},{'c':__T[6],'t':12,'p':{'h':'#search','r':'search'}},{'c':__T[7],'t':12,'p':{'h':'#favorite','r':'favorite'}},{'c':__T[8],'t':12,'p':{'h':'#planzakupok','r':'planzakupok'}},{'c':__T[9],'t':12,'p':{'h':'#analytics','r':'analytics'}}],'t':0,'p':{'c':'app-top-menu-inner'}},'t':0,'p':{'c':'app-top-menu','sc':1}}]
};
function includeGeneralTemplateUnavailable($,_) {
	return[{'t':0,'p':{'c':'app-unavailable-info '+(_['tariff']?' unavailable':' auth'),'st':(_['width']?' width:'+_['width']:'')}}]
}
function includeGeneralTemplateCheckbox($,_) {
	return[{'t':0,'p':{'c':'app-ui-checkbox'+(_['checked']?' checked':''),'_name':_['name'],'_value':_['value']}}]
}
Initialization.inherits([Core,[Component,Foreach,Condition],Component,[Application,View,Form,Control,Menu,DataTable,DataTableFragmets,DataTableRow,FilterStatistics,SearchForm,SearchFormButton,SearchFormPanel,TenderSearchForm,SearchFormFilters,Calendar,Dialog,Form,FormField,PopupMenu,Submit,TabPanel,Tooltip,TooltipPopup,FilterSubscription,FilterSubscriptionOptions,UserInfo],Foreach,[Switch,IfSwitch],Application,[App],View,[Analytics,Error401,Error404,Favorite,Main,Search],DataTableRow,[DataTableStandartRow],DataTable,[TendersDataTable],SearchFormButton,[SearchFormPanelButton],SearchFormPanelButton,[KeywordsButton],SearchFormPanel,[KeywordsPanel],Calendar,[FavoritesCalendar],Controller,[Favorites,Filters,FiltersStat,Subscription,UserInfoLoader],Dialog,[CalendarFavorites,FilterEdit,OrderCall,Support],Form,[AuthForm,OrderCallForm],OrderCallForm,[SupportForm],Control,[KeywordsControl,Input,Select,Textarea,TopMenu],TabPanel,[DataTableTabPanel],PopupMenu,[SearchFormCreateFilterMenu,SearchFormFilterMenu]]);
Router = new Router();
User = new User();
Favorites = new Favorites();
Filters = new Filters();
FiltersStat = new FiltersStat();
Subscription = new Subscription();
UserInfoLoader = new UserInfoLoader();
User.load(App);
})();